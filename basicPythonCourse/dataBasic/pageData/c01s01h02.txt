b'IyMgYmFzaWNQeXRob24ucHkgIyMNCiMjIHdyaXR0ZW4gYnkgUm9iZXJ0IENoYXRlbGFpbiAjIw0KIyMgTW9kaWZpZWQgODo0NyBwbSwgU2VwIDA3LCAyMDE5ICMjDQoNCmltcG9ydCBzeXMNCmltcG9ydCBvcw0KZnJvbSB0a2ludGVyIGltcG9ydCAqDQpmcm9tIHRraW50ZXIgaW1wb3J0IHR0ayANCmZyb20gY29udGV4dGxpYiBpbXBvcnQgcmVkaXJlY3Rfc3Rkb3V0DQppbXBvcnQgaW8NCmZyb20gc2h1dGlsIGltcG9ydCBjb3B5ZmlsZQ0KaW1wb3J0IGJhc2U2NA0KDQojIHdpdGggb3BlbigidGVzdC56aXAiLCAicmIiKSBhcyBmOg0KIyAgICAgZW5jb2RlZFppcCA9IGJhc2U2NC5iNjRlbmNvZGUoZi5yZWFkKCkpDQojICAgICBwcmludChlbmNvZGVkWmlwLmRlY29kZSgpKQ0KY2xhc3MgYmFzaWNMZWFybmluZygpOg0KDQoJZGVmIF9faW5pdF9fKHNlbGYscm9vdCk6DQoJCSMjIHBhdGhzICMjDQoJCXNlbGYuZGlyX3BhdGggPSBvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpDQoJCXNlbGYucm9vdFBhdGggPSBzZWxmLmRpcl9wYXRoKycvZGF0YUJhc2ljLycNCgkJc2VsZi5wYWdlRGF0YVBhdGggPSBzZWxmLnJvb3RQYXRoKydwYWdlRGF0YS8nDQoJCXNlbGYuaW1hZ2VQYXRoID0gc2VsZi5yb290UGF0aCsnaW1hZ2VzLycgDQoJCSMjIGNvcHkgc291cmNlIGZpbGUgdG8gcGFnZSBkYXRhIGZvbGRlciAjIw0KCQlmaWxlID0gb3BlbihzZWxmLmRpcl9wYXRoKycvYmFzaWNQeXRob24ucHknLCdyYicpDQoJCXJhd0NvZGUgPSBmaWxlLnJlYWQoKQ0KCQlmaWxlLmNsb3NlKCkNCgkJZW5jb2RlZENvZGUgPSBiYXNlNjQuYjY0ZW5jb2RlKHJhd0NvZGUpDQoJCWZpbGUgPSBvcGVuKHNlbGYucGFnZURhdGFQYXRoKyJjMDFzMDFoMDIudHh0IiwndycpDQoJCWZpbGUud3JpdGUoc3RyKGVuY29kZWRDb2RlKSkNCgkJZmlsZS5jbG9zZSgpDQoJCXByaW50KGVuY29kZWRDb2RlLmRlY29kZSgpKQ0KCSMJY29weWZpbGUoc2VsZi5kaXJfcGF0aCsnL2Jhc2ljUHl0aG9uLnB5JyxzZWxmLnBhZ2VEYXRhUGF0aCsiYzAxczAyaDAyLnR4dCIpICMgdHJpY2sgc3R1ZGVudHMNCgkJIyMgbWFpbiB3aW5kb3cgIyMNCgkJc2VsZi5yb290ID0gcm9vdA0KCQlzZWxmLnJvb3QudGl0bGUoIkxlYWh1cnN0IEJhc2ljIFB5dGhvbiIpDQoJCXNlbGYubWluWCA9IDgyMA0KCQlzZWxmLm1pblkgPSA1NTANCgkJc2l6ZVdpbiA9IHN0cihzZWxmLm1pblgpKyd4JytzdHIoc2VsZi5taW5ZKQ0KCQlzZWxmLnJvb3QuZ2VvbWV0cnkoc2l6ZVdpbikNCgkJc2VsZi5yb290LnJlc2l6YWJsZShGYWxzZSxGYWxzZSkNCgkJIyBmb250cyAjIw0KCQlzZWxmLmZvbnROYW1lMSA9ICJNUyBTZXJpZiINCgkJc2VsZi5mb250TmFtZTIgPSAiQ291cmllciINCgkJc2VsZi5mb250TmFtZTMgPSAiVGltZXMgTmV3IFJvbWFuIg0KCQlzZWxmLmZvbnROYW1lNCA9ICJDb21pYyBTYW5zIE1TIg0KCQlzZWxmLnRpdGxlUGFnZUZvbnQgPSAoc2VsZi5mb250TmFtZTEsNDMsJ2JvbGQnKQ0KCQlzZWxmLnRpdGxlRm9udCA9IChzZWxmLmZvbnROYW1lMywxNCwnbm9ybWFsJykNCgkJc2VsZi5zdWJ0aXRsZUZvbnQ9KHNlbGYuZm9udE5hbWUzLDE0LCdub3JtYWwnKQ0KCQlzZWxmLnN1YnNlY3Rpb25Gb250PShzZWxmLmZvbnROYW1lMywxNCwiaXRhbGljIikNCgkJc2VsZi5mb290Rm9udCA9IChzZWxmLmZvbnROYW1lMywxNCwnYm9sZCcpDQoJCXNlbGYuY29kZUZvbnQgPSAoc2VsZi5mb250TmFtZTIsMTAsJ25vcm1hbCcpDQoJCXNlbGYub3V0cHV0Rm9udCA9IHNlbGYuY29kZUZvbnQNCgkJc2VsZi5hZGRyZXNzRm9udCA9IHNlbGYuY29kZUZvbnQNCgkJc2VsZi5ub3Rlc0ZvbnQgPSBzZWxmLmFkZHJlc3NGb250DQoJCXNlbGYuYnV0dG9uRm9udCA9IChzZWxmLmZvbnROYW1lMSwyMCwnYm9sZCcpDQoJCXNlbGYubGVzc29uTGFiZWxGb250ID0gKHNlbGYuZm9udE5hbWUxLDE2LCdib2xkJykNCgkJc2VsZi5iaWdJZGVhRm9udCA9IChzZWxmLmZvbnROYW1lMywxNCwnbm9ybWFsJykNCgkJc2VsZi5leHBsYW5hdGlvbkZvbnQgPShzZWxmLmZvbnROYW1lMywxMywnbm9ybWFsJykNCgkJc2VsZi5wcm9qZWN0Rm9udCA9IChzZWxmLmZvbnROYW1lMywxOCwnbm9ybWFsJykNCgkJc2VsZi5rdUZvbnQgPSAoc2VsZi5mb250TmFtZTMsMTMsJ25vcm1hbCcpDQoJCXNlbGYudGlGb250ID0gc2VsZi5rdUZvbnQNCgkJc2VsZi5hRm9udCA9IHNlbGYua3VGb250DQoJCXNlbGYua3VMYWJlbEZvbnQgPSAoc2VsZi5mb250TmFtZTEsMTYsJ2JvbGQnKQ0KCQlzZWxmLnRpTGFiZWxGb250ID0gc2VsZi5rdUxhYmVsRm9udA0KCQlzZWxmLmFMYWJlbEZvbnQgPSBzZWxmLmt1TGFiZWxGb250DQoJCXNlbGYubm9GaWxlRm9udCA9IChzZWxmLmZvbnROYW1lNCw2MCwnYm9sZCcpDQoJCSMjIGNvbG91cnMgIyMNCgkJc2VsZi5idXR0b25Db2xvdXIgPSAnI2NjYzhjOCcNCgkJc2VsZi5idXR0b25SZWxpZWYgPSAnZ3Jvb3ZlJw0KCQlzZWxmLmhlYWRlcmJnY29sb3IgPSAnIzAwMDA1YScNCgkJc2VsZi5oZWFkZXJiZ2NvbG9yID0nIzAwMjg0NycNCgkJc2VsZi5oZWFkZXJmZ2NvbG9yID0gJ3doaXRlJw0KCQlzZWxmLmZvb3RlcmJnY29sb3IgPSBzZWxmLmhlYWRlcmJnY29sb3INCgkJc2VsZi5mb290ZXJmZ2NvbG9yID0gc2VsZi5oZWFkZXJmZ2NvbG9yDQoJCXNlbGYua3ViZ2NvbG9yPSdyZWQnDQoJCXNlbGYua3VmZ2NvbG9yPSd3aGl0ZScNCgkJc2VsZi50aWJnY29sb3I9J2dyZWVuJw0KCQlzZWxmLnRpZmdjb2xvcj0nd2hpdGUnDQoJCXNlbGYuYWJnY29sb3I9J2JsdWUnDQoJCXNlbGYuYWZnY29sb3IgPSAnd2hpdGUnDQoJCXNlbGYuYmlnSWRlYUNvbG9yID0gJ2JsdWUnDQoJCSMjIGltYWdlcyAjIw0KCQlzZWxmLmxvZ28gPSBQaG90b0ltYWdlKGZpbGU9c2VsZi5yb290UGF0aCsnbG9nb190cmFuc3BhcmVudC5wbmcnKQ0KCQlzZWxmLmxvZ29fc21hbGwgPVBob3RvSW1hZ2UoZmlsZT1zZWxmLnJvb3RQYXRoKydsb2dvX3NtYWxsX3RyYW5zcGFyZW50LnBuZycpDQoJCSMjIGJpbmQgdG8ga2V5IHByZXNzDQoJCXNlbGYucm9vdC5iaW5kKCI8S2V5UHJlc3M+IixzZWxmLmtleVByZXNzX2NhbGxiYWNrKQ0KCQkjIyBzdGFydCBwcm9ncmFtICMjDQoJCXNlbGYuZmlyc3RDYWxsID0gMQ0KCQlzZWxmLmxvYWRQcm9ncmFtRGF0YSgpDQoJCXNlbGYuY3JlYXRlV2lkZ2V0cygpDQoJCXNlbGYudG9jRnJhbWUucGFjayhleHBhbmQ9VHJ1ZSxmaWxsPUJPVEgpDQoJCXNlbGYud2hpY2hGcmFtZSA9ICd0b2MnDQoNCgkJcmV0dXJuDQoNCglkZWYga2V5UHJlc3NfY2FsbGJhY2soc2VsZixldmVudCk6DQoJCWlmIGV2ZW50LmtleXN5bT09InIiIG9yIGV2ZW50LmtleXN5bT09IlIiOg0KCQkJaWYgc2VsZi53aGljaEZyYW1lID09ICdsZXNzb24nOg0KCQkJCXNlbGYuYmFja1RPQ19sZXNzb25fY2FsbGJhY2soKQ0KCQkJZWxpZiBzZWxmLndoaWNoRnJhbWUgPT0gJ2V4YW1wbGUnOg0KCQkJCXNlbGYuYmFja1RPQ19leGFtcGxlX2NhbGxiYWNrKCkNCgkJCWVsaWYgc2VsZi53aGljaEZyYW1lID09ICdwcmFjdGljZSc6DQoJCQkJc2VsZi5iYWNrVE9DX3ByYWN0aWNlX2NhbGxiYWNrKCkNCgkJCWVsaWYgc2VsZi53aGljaEZyYW1lID09ICdwcm9qZWN0JzoNCgkJCQlzZWxmLmJhY2tUT0NfcHJvamVjdF9jYWxsYmFjaygpDQoJCQllbGlmIHNlbGYud2hpY2hGcmFtZSA9PSAnbm9GaWxlJzoNCgkJCQlzZWxmLmJhY2tUT0Nfbm9GaWxlX2NhbGxiYWNrKCkNCgkJZWxpZiBldmVudC5rZXlzeW09PSJwIiBvciBldmVudC5rZXlzeW09PSJQIjoNCgkJCWlmIHNlbGYud2hpY2hGcmFtZSA9PSAnbGVzc29uJzoNCgkJCQlzZWxmLnByZXZQYWdlX2xlc3Nvbl9jYWxsYmFjaygpDQoJCQllbGlmIHNlbGYud2hpY2hGcmFtZSA9PSAnZXhhbXBsZSc6DQoJCQkJc2VsZi5wcmV2UGFnZV9leGFtcGxlX2NhbGxiYWNrKCkNCgkJCWVsaWYgc2VsZi53aGljaEZyYW1lID09ICdwcmFjdGljZSc6DQoJCQkJc2VsZi5wcmV2UGFnZV9wcmFjdGljZV9jYWxsYmFjaygpDQoJCQllbGlmIHNlbGYud2hpY2hGcmFtZSA9PSAncHJvamVjdCc6DQoJCQkJc2VsZi5wcmV2UGFnZV9wcm9qZWN0X2NhbGxiYWNrKCkNCgkJCWVsaWYgc2VsZi53aGljaEZyYW1lID09ICdub0ZpbGUnOg0KCQkJCXNlbGYucHJldlBhZ2Vfbm9GaWxlX2NhbGxiYWNrKCkNCgkJZWxpZiBldmVudC5rZXlzeW09PSJuIiBvciBldmVudC5rZXlzeW09PSJOIjoNCgkJCWlmIHNlbGYud2hpY2hGcmFtZSA9PSAnbGVzc29uJzoNCgkJCQlzZWxmLm5leHRQYWdlX2xlc3Nvbl9jYWxsYmFjaygpDQoJCQllbGlmIHNlbGYud2hpY2hGcmFtZSA9PSAnZXhhbXBsZSc6DQoJCQkJc2VsZi5uZXh0UGFnZV9leGFtcGxlX2NhbGxiYWNrKCkNCgkJCWVsaWYgc2VsZi53aGljaEZyYW1lID09ICdwcmFjdGljZSc6DQoJCQkJc2VsZi5uZXh0UGFnZV9wcmFjdGljZV9jYWxsYmFjaygpDQoJCQllbGlmIHNlbGYud2hpY2hGcmFtZSA9PSAncHJvamVjdCc6DQoJCQkJc2VsZi5uZXh0UGFnZV9wcm9qZWN0X2NhbGxiYWNrKCkNCgkJCWVsaWYgc2VsZi53aGljaEZyYW1lPT0ndG9jJzoNCgkJCQlzZWxmLnRvY0ZyYW1lLmZvcmdldCgpDQoJCQkJaWYgc2VsZi5sb2FkSURbLTNdPT0ncCc6DQoJCQkJCXNlbGYubG9hZExlc3NvbigpDQoJCQkJZWxpZiBzZWxmLmxvYWRJRFstM109PSdlJzoNCgkJCQkJc2VsZi5sb2FkRXhhbXBsZSgpDQoJCQkJZWxpZiBzZWxmLmxvYWRJRFstM109PSdoJzoNCgkJCQkJc2VsZi5sb2FkUHJhY3RpY2UoKQ0KCQkJCWVsaWYgc2VsZi5sb2FkSURbLTNdPT0nbSc6DQoJCQkJCXNlbGYubG9hZFByb2plY3QoKQ0KCQkJCWVsc2U6DQoJCQkJCXByaW50KCJFUlJPUiIpDQoNCg0KDQoJZGVmIGNyZWF0ZVdpZGdldHMoc2VsZik6DQoJCXNlbGYuY3JlYXRlVE9DKCkNCgkJc2VsZi5jcmVhdGVMRVNTT04oKQ0KCQlzZWxmLmNyZWF0ZUVYQU1QTEUoKQ0KCQlzZWxmLmNyZWF0ZVBSQUNUSUNFKCkNCgkJc2VsZi5jcmVhdGVOT0ZJTEUoKQ0KCQlzZWxmLmNyZWF0ZVBST0pFQ1QoKQ0KCQlyZXR1cm4NCg0KIyMjIyMjIyMjIyMjIyMjIE5PIEZJTEUgTUVUSE9EUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KCWRlZiBjcmVhdGVOT0ZJTEUoc2VsZik6DQoJCSMjIGNyZWF0ZSB3aWRnZXRzICMjDQoJCXNlbGYubm9GaWxlRnJhbWUgPSB0dGsuRnJhbWUocm9vdCkNCgkJc2VsZi5oZWFkX25vRmlsZSA9IHR0ay5GcmFtZShzZWxmLm5vRmlsZUZyYW1lKQ0KCQlzZWxmLmJvZHlfbm9GaWxlID0gdHRrLkZyYW1lKHNlbGYubm9GaWxlRnJhbWUpDQoJCXNlbGYuZm9vdF9ub0ZpbGUgPSB0dGsuRnJhbWUoc2VsZi5ub0ZpbGVGcmFtZSkNCgkJc2VsZi5sb2dvX25vRmlsZSA9IHR0ay5MYWJlbChzZWxmLmhlYWRfbm9GaWxlKQ0KCQlzZWxmLnRpdGxlX25vRmlsZSA9IHR0ay5MYWJlbChzZWxmLmhlYWRfbm9GaWxlKQ0KCQlzZWxmLnN1YnRpdGxlX25vRmlsZSA9IHR0ay5MYWJlbChzZWxmLmhlYWRfbm9GaWxlKQ0KCQlzZWxmLnN1YnNlY3Rpb25fbm9GaWxlID0gdHRrLkxhYmVsKHNlbGYuaGVhZF9ub0ZpbGUpDQoJCXNlbGYubGFiZWxfbm9GaWxlID0gdHRrLkxhYmVsKHNlbGYuYm9keV9ub0ZpbGUpDQoJCXNlbGYuYmFja1RPQ19ub0ZpbGUgPSBCdXR0b24oc2VsZi5mb290X25vRmlsZSkNCgkJc2VsZi5wcmV2UGFnZV9ub0ZpbGUgPSBCdXR0b24oc2VsZi5mb290X25vRmlsZSkNCgkJc2VsZi5uZXh0UGFnZV9ub0ZpbGUgPSBCdXR0b24oc2VsZi5mb290X25vRmlsZSkNCgkJDQoJCSMjIHNldHVwIHdpZGdldHMgDQoJCXNlbGYubm9GaWxlRnJhbWUucm93Y29uZmlndXJlKDAsd2VpZ2h0PTApDQoJCXNlbGYubm9GaWxlRnJhbWUucm93Y29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYubm9GaWxlRnJhbWUucm93Y29uZmlndXJlKDIsd2VpZ2h0PTApDQoJCXNlbGYubm9GaWxlRnJhbWUuY29sdW1uY29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF9ub0ZpbGUuZ3JpZChyb3c9MCxjb2x1bW49MCxzdGljaz0nbndzZScpDQoJCXNlbGYuYm9keV9ub0ZpbGUuZ3JpZChyb3c9MSxjb2x1bW49MCxzdGljaz0nbndzZScpDQoJCXNlbGYuZm9vdF9ub0ZpbGUuZ3JpZChyb3c9Mixjb2x1bW49MCxzdGljaz0nbndzZScpDQoNCgkJc2VsZi5oZWFkX25vRmlsZS5yb3djb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX25vRmlsZS5yb3djb25maWd1cmUoMSx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX25vRmlsZS5yb3djb25maWd1cmUoMix3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX25vRmlsZS5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MCkNCgkJc2VsZi5oZWFkX25vRmlsZS5jb2x1bW5jb25maWd1cmUoMSx3ZWlnaHQ9MSkNCgkJDQoJCXNlbGYuZm9vdF9ub0ZpbGUucm93Y29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuZm9vdF9ub0ZpbGUuY29sdW1uY29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuZm9vdF9ub0ZpbGUuY29sdW1uY29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYuZm9vdF9ub0ZpbGUuY29sdW1uY29uZmlndXJlKDIsd2VpZ2h0PTEpDQoNCgkJIyBoZWFkDQoJCXNlbGYuaGVhZF9ub0ZpbGUuY29uZmlnKHJlbGllZj0ncmlkZ2UnKQ0KCQlzZWxmLmxvZ29fbm9GaWxlLmdyaWQocm93PTAsY29sdW1uPTAscm93c3Bhbj0zLHN0aWNrPSduc2V3JykNCgkJc2VsZi50aXRsZV9ub0ZpbGUuZ3JpZChyb3c9MCxjb2x1bW49MSxzdGljaz0nbndzZScpDQoJCXNlbGYuc3VidGl0bGVfbm9GaWxlLmdyaWQocm93PTEsY29sdW1uPTEsc3RpY2s9J253c2UnKQ0KCQlzZWxmLnN1YnNlY3Rpb25fbm9GaWxlLmdyaWQocm93PTIsY29sdW1uPTEsc3RpY2s9J253c2UnKQ0KCQlzZWxmLmxvZ29fbm9GaWxlLmNvbmZpZyhpbWFnZT1zZWxmLmxvZ29fc21hbGwsYmFja2dyb3VuZD1zZWxmLmhlYWRlcmJnY29sb3IpDQoJCXNlbGYudGl0bGVfbm9GaWxlLmNvbmZpZyhmb250PXNlbGYudGl0bGVGb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KCQlzZWxmLnN1YnRpdGxlX25vRmlsZS5jb25maWcoZm9udD1zZWxmLnN1YnRpdGxlRm9udCxiYWNrZ3JvdW5kPXNlbGYuaGVhZGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuaGVhZGVyZmdjb2xvcikNCgkJc2VsZi5zdWJzZWN0aW9uX25vRmlsZS5jb25maWcoZm9udD1zZWxmLnN1YnNlY3Rpb25Gb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KDQoJCSMgYm9keQ0KCQlzZWxmLmxhYmVsX25vRmlsZS5wYWNrKGV4cGFuZD1UcnVlLGZpbGw9Qk9USCkNCgkJc2VsZi5sYWJlbF9ub0ZpbGUuY29uZmlnKHRleHQ9IsKvXFxfKOODhClfL8KvXG5GSUxFIE5PVCBGT1VORCIsZm9udD1zZWxmLm5vRmlsZUZvbnQsanVzdGlmeSA9ICdjZW50ZXInLGFuY2hvcj0nY2VudGVyJykNCgkJIyBmb290DQoJCXNlbGYuYmFja1RPQ19ub0ZpbGUuZ3JpZChyb3c9MCxjb2x1bW49MCxzdGljaz0nbnN3ZScpDQoJCXNlbGYucHJldlBhZ2Vfbm9GaWxlLmdyaWQocm93PTAsY29sdW1uPTEsc3RpY2s9J25zd2UnKQ0KCQlzZWxmLm5leHRQYWdlX25vRmlsZS5ncmlkKHJvdz0wLGNvbHVtbj0yLHN0aWNrPSduc3dlJykNCgkJc2VsZi5iYWNrVE9DX25vRmlsZS5jb25maWcodGV4dD0iUmV0dXJuIHRvIFQuTy5DLiAocikiLGZvbnQ9c2VsZi5mb290Rm9udCxiYWNrZ3JvdW5kPXNlbGYuZm9vdGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuZm9vdGVyZmdjb2xvcixyZWxpZWY9c2VsZi5idXR0b25SZWxpZWYpDQoJCXNlbGYucHJldlBhZ2Vfbm9GaWxlLmNvbmZpZyh0ZXh0PSJQcmV2aW91cyBQYWdlIChwKSIsZm9udD1zZWxmLmZvb3RGb250LGJhY2tncm91bmQ9c2VsZi5mb290ZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5mb290ZXJmZ2NvbG9yLHJlbGllZj1zZWxmLmJ1dHRvblJlbGllZikNCgkJc2VsZi5uZXh0UGFnZV9ub0ZpbGUuY29uZmlnKHRleHQ9Ik5leHQgUGFnZSAobikiLGZvbnQ9c2VsZi5mb290Rm9udCxiYWNrZ3JvdW5kPXNlbGYuZm9vdGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuZm9vdGVyZmdjb2xvcixyZWxpZWY9c2VsZi5idXR0b25SZWxpZWYsc3RhdGU9J2Rpc2FibGVkJykNCgkJc2VsZi5iYWNrVE9DX25vRmlsZS5jb25maWcoY29tbWFuZD1zZWxmLmJhY2tUT0Nfbm9GaWxlX2NhbGxiYWNrKQ0KCQlzZWxmLnByZXZQYWdlX25vRmlsZS5jb25maWcoY29tbWFuZD1zZWxmLnByZXZQYWdlX25vRmlsZV9jYWxsYmFjaykNCg0KCWRlZiBsb2FkTk9GSUxFKHNlbGYpOg0KCQlzZWxmLm5vRmlsZUZyYW1lLnBhY2soZXhwYW5kPVRydWUsZmlsbD1CT1RIKQ0KCQlzZWxmLndoaWNoRnJhbWUgPSAnbm9maWxlJw0KCQlJRCA9IHNlbGYubG9hZElEDQoJCWlmIElEWzZdPT0ncCc6DQoJCQlkYXRhID0gc2VsZi5sZXNzb25EYXRhW0lEXQ0KCQllbGlmIElEWzZdPT0nZSc6DQoJCQlkYXRhID0gc2VsZi5leGFtcGxlRGF0YVtJRF0NCgkJZWxpZiBJRFs2XT09J2gnOg0KCQkJZGF0YSA9IHNlbGYucHJhY3RpY2VEYXRhW0lEXQ0KCQllbGlmIElEWzZdPT0nbSc6DQoJCQlkYXRhID0gc2VsZi5wcm9qZWN0RGF0YVtJRF0NCgkJZWxzZToNCgkJCXByaW50KCdFUlJPUicpDQoJCXNlbGYudGl0bGVfbm9GaWxlLmNvbmZpZyh0ZXh0ID0gZGF0YVsnY2hhcHRlciddKQ0KCQlzZWxmLnN1YnRpdGxlX25vRmlsZS5jb25maWcodGV4dD1kYXRhWydzZWN0aW9uJ10pDQoJCXNlbGYuc3Vic2VjdGlvbl9ub0ZpbGUuY29uZmlnKHRleHQ9ZGF0YVsnc3Vic2VjdGlvbiddKQ0KCQlzZWxmLm5vRmlsZUZyYW1lLnBhY2soZXhwYW5kPVRydWUsZmlsbD1CT1RIKQ0KCQlzZWxmLndoaWNoRnJhbWUgPSAnbm9GaWxlJw0KCQlyZXR1cm4NCg0KCWRlZiBwcmV2UGFnZV9ub0ZpbGVfY2FsbGJhY2soc2VsZik6DQoJCUlEID0gc2VsZi5sb2FkSUQNCgkJaW5kID0gc2VsZi5wYWdlSUQuaW5kZXgoSUQpDQoJCXNlbGYubm9GaWxlRnJhbWUuZm9yZ2V0KCkNCgkJaWYgaW5kPT0wOg0KCQkJc2VsZi50b2NGcmFtZS5wYWNrKGV4cGFuZD1UcnVlLGZpbGw9Qk9USCkNCgkJCXNlbGYucHJlcGFyZVRPQygpDQoJCWVsc2U6DQoJCQlzZWxmLmxvYWRJRCA9IHNlbGYucGFnZUlEW2luZC0xXQ0KCQkJc2VsZi5sb2FkUGFnZV9jYWxsYmFjaygpDQoNCglkZWYgYmFja1RPQ19ub0ZpbGVfY2FsbGJhY2soc2VsZik6DQoJCXNlbGYubm9GaWxlRnJhbWUuZm9yZ2V0KCkNCgkJc2VsZi50b2NGcmFtZS5wYWNrKGV4cGFuZD1UcnVlLGZpbGw9Qk9USCkNCgkJc2VsZi5wcmVwYXJlVE9DKCkNCg0KDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyBMRVNTT04gRlJBTUUgTUVUSE9EUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCglkZWYgY3JlYXRlTEVTU09OKHNlbGYpOg0KCQkjIyBjcmVhdGUgd2lkZ2V0cyAjIw0KCQlzZWxmLmxlc3NvbkZyYW1lID0gdHRrLkZyYW1lKHNlbGYucm9vdCkNCgkJc2VsZi5oZWFkX2xlc3NvbiA9IHR0ay5GcmFtZShzZWxmLmxlc3NvbkZyYW1lKQ0KCQlzZWxmLmJvZHlfbGVzc29uID0gdHRrLkZyYW1lKHNlbGYubGVzc29uRnJhbWUpDQoJCXNlbGYuZm9vdF9sZXNzb24gPSB0dGsuRnJhbWUoc2VsZi5sZXNzb25GcmFtZSkNCgkJc2VsZi5sb2dvX2xlc3NvbiA9IHR0ay5MYWJlbChzZWxmLmhlYWRfbGVzc29uKQ0KCQlzZWxmLnRpdGxlX2xlc3NvbiA9IHR0ay5MYWJlbChzZWxmLmhlYWRfbGVzc29uKQ0KCQlzZWxmLnN1YnRpdGxlX2xlc3NvbiA9IHR0ay5MYWJlbChzZWxmLmhlYWRfbGVzc29uKQ0KCQlzZWxmLnN1YnNlY3Rpb25fbGVzc29uID0gdHRrLkxhYmVsKHNlbGYuaGVhZF9sZXNzb24pDQoNCgkJc2VsZi5pbWFnZV9sZXNzb24gPSB0dGsuTGFiZWwoc2VsZi5ib2R5X2xlc3NvbikNCgkJc2VsZi5iaWdJZGVhX2xlc3NvbiA9IExhYmVsRnJhbWUoc2VsZi5ib2R5X2xlc3NvbikNCgkJc2VsZi5leHBsYW5hdGlvbl9sZXNzb24gPSBMYWJlbEZyYW1lKHNlbGYuYm9keV9sZXNzb24pDQoJCXNlbGYuYmFja1RPQ19sZXNzb24gPSBCdXR0b24oc2VsZi5mb290X2xlc3NvbikNCgkJc2VsZi5wcmV2UGFnZV9sZXNzb24gPSBCdXR0b24oc2VsZi5mb290X2xlc3NvbikNCgkJc2VsZi5uZXh0UGFnZV9sZXNzb24gPSBCdXR0b24oc2VsZi5mb290X2xlc3NvbikNCgkJc2VsZi5iaWdJZGVhX3RleHQgPSB0dGsuTGFiZWwoc2VsZi5iaWdJZGVhX2xlc3NvbikNCgkJc2VsZi5leHBsYW5hdGlvbl90ZXh0ID0gdHRrLkxhYmVsKHNlbGYuZXhwbGFuYXRpb25fbGVzc29uKQ0KCQkjIyBzZXR1cCB3aWRnZXRzIA0KCQlzZWxmLmxlc3NvbkZyYW1lLnJvd2NvbmZpZ3VyZSgwLHdlaWdodD0wKQ0KCQlzZWxmLmxlc3NvbkZyYW1lLnJvd2NvbmZpZ3VyZSgxLHdlaWdodD0wKQ0KCQlzZWxmLmxlc3NvbkZyYW1lLnJvd2NvbmZpZ3VyZSgyLHdlaWdodD0xKQ0KCQlzZWxmLmxlc3NvbkZyYW1lLmNvbHVtbmNvbmZpZ3VyZSgwLHdlaWdodD0xKQ0KCQlzZWxmLmhlYWRfbGVzc29uLmdyaWQocm93PTAsY29sdW1uPTAsc3RpY2s9J253c2UnKQ0KCQlzZWxmLmJvZHlfbGVzc29uLmdyaWQocm93PTEsY29sdW1uPTAsc3RpY2s9J253c2UnKQ0KCQlzZWxmLmZvb3RfbGVzc29uLmdyaWQocm93PTIsY29sdW1uPTAsc3RpY2s9J253c2UnKQ0KDQoJCXNlbGYuaGVhZF9sZXNzb24ucm93Y29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF9sZXNzb24ucm93Y29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF9sZXNzb24ucm93Y29uZmlndXJlKDIsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF9sZXNzb24uY29sdW1uY29uZmlndXJlKDAsd2VpZ2h0PTApDQoJCXNlbGYuaGVhZF9sZXNzb24uY29sdW1uY29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJDQoJCXNlbGYuYm9keV9sZXNzb24uY29sdW1uY29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYuYm9keV9sZXNzb24ucm93Y29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuYm9keV9sZXNzb24ucm93Y29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCQ0KCQlzZWxmLmZvb3RfbGVzc29uLnJvd2NvbmZpZ3VyZSgwLHdlaWdodD0xKQ0KCQlzZWxmLmZvb3RfbGVzc29uLmNvbHVtbmNvbmZpZ3VyZSgwLHdlaWdodD0xKQ0KCQlzZWxmLmZvb3RfbGVzc29uLmNvbHVtbmNvbmZpZ3VyZSgxLHdlaWdodD0xKQ0KCQlzZWxmLmZvb3RfbGVzc29uLmNvbHVtbmNvbmZpZ3VyZSgyLHdlaWdodD0xKQ0KDQoJCSMgaGVhZA0KCQlzZWxmLmhlYWRfbGVzc29uLmNvbmZpZyhyZWxpZWY9J3JpZGdlJykNCgkJc2VsZi5sb2dvX2xlc3Nvbi5ncmlkKHJvdz0wLGNvbHVtbj0wLHJvd3NwYW49MyxzdGljaz0nbnNldycpDQoJCXNlbGYudGl0bGVfbGVzc29uLmdyaWQocm93PTAsY29sdW1uPTEsc3RpY2s9J253c2UnKQ0KCQlzZWxmLnN1YnRpdGxlX2xlc3Nvbi5ncmlkKHJvdz0xLGNvbHVtbj0xLHN0aWNrPSdud3NlJykNCgkJc2VsZi5zdWJzZWN0aW9uX2xlc3Nvbi5ncmlkKHJvdz0yLGNvbHVtbj0xLHN0aWNrPSdud3NlJykNCgkJc2VsZi5sb2dvX2xlc3Nvbi5jb25maWcoaW1hZ2U9c2VsZi5sb2dvX3NtYWxsLGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yKQ0KCQlzZWxmLnRpdGxlX2xlc3Nvbi5jb25maWcoZm9udD1zZWxmLnRpdGxlRm9udCxiYWNrZ3JvdW5kPXNlbGYuaGVhZGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuaGVhZGVyZmdjb2xvcikNCgkJc2VsZi5zdWJ0aXRsZV9sZXNzb24uY29uZmlnKGZvbnQ9c2VsZi5zdWJ0aXRsZUZvbnQsYmFja2dyb3VuZD1zZWxmLmhlYWRlcmJnY29sb3IsZm9yZWdyb3VuZD1zZWxmLmhlYWRlcmZnY29sb3IpDQoJCXNlbGYuc3Vic2VjdGlvbl9sZXNzb24uY29uZmlnKGZvbnQ9c2VsZi5zdWJzZWN0aW9uRm9udCxiYWNrZ3JvdW5kPXNlbGYuaGVhZGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuaGVhZGVyZmdjb2xvcikNCg0KCQkjIGJvZHkgDQoJCXNlbGYuaW1hZ2VfbGVzc29uLmdyaWQocm93PTAsY29sdW1uPTAscm93c3Bhbj0yLHN0aWNrPSduc2V3JykNCgkJc2VsZi5pbWFnZV9sZXNzb24uY29uZmlnKHJlbGllZj0nc29saWQnKQ0KCQlzZWxmLmJpZ0lkZWFfbGVzc29uLmdyaWQocm93PTAsY29sdW1uPTEsc3RpY2s9J25zZXcnKQ0KCQlzZWxmLmV4cGxhbmF0aW9uX2xlc3Nvbi5ncmlkKHJvdz0xLGNvbHVtbj0xLHN0aWNrPSduc2V3JykNCgkJc2VsZi5iaWdJZGVhX3RleHQucGFjayhmaWxsPUJPVEgsZXhwYW5kPVRydWUpDQoJCXNlbGYuZXhwbGFuYXRpb25fdGV4dC5wYWNrKGZpbGw9Qk9USCxleHBhbmQ9VHJ1ZSkNCgkJc2VsZi5iaWdJZGVhX2xlc3Nvbi5jb25maWcoZm9udD1zZWxmLmxlc3NvbkxhYmVsRm9udCkNCgkJc2VsZi5leHBsYW5hdGlvbl9sZXNzb24uY29uZmlnKGZvbnQ9c2VsZi5sZXNzb25MYWJlbEZvbnQpDQoJCXNlbGYuYmlnSWRlYV9sZXNzb24uY29uZmlnKHRleHQ9IkJpZyBJZGVhIixsYWJlbGFuY2hvcj0nbicpDQoJCXNlbGYuZXhwbGFuYXRpb25fbGVzc29uLmNvbmZpZyh0ZXh0PSJFeHBsYW5hdGlvbiIsbGFiZWxhbmNob3I9J24nKQ0KCQlzZWxmLmJpZ0lkZWFfdGV4dC5jb25maWcoZm9udD1zZWxmLmJpZ0lkZWFGb250LHdyYXBsZW5ndGg9Mzg1LGp1c3RpZnk9J2xlZnQnLGFuY2hvcj0nY2VudGVyJykNCgkJc2VsZi5leHBsYW5hdGlvbl90ZXh0LmNvbmZpZyhmb250PXNlbGYuZXhwbGFuYXRpb25Gb250LGp1c3RpZnk9J2xlZnQnLHdyYXBsZW5ndGg9Mzg1LGFuY2hvcj0nY2VudGVyJykNCg0KCQkjIGZvb3QNCgkJc2VsZi5iYWNrVE9DX2xlc3Nvbi5ncmlkKHJvdz0wLGNvbHVtbj0wLHN0aWNrPSduc3dlJykNCgkJc2VsZi5wcmV2UGFnZV9sZXNzb24uZ3JpZChyb3c9MCxjb2x1bW49MSxzdGljaz0nbnN3ZScpDQoJCXNlbGYubmV4dFBhZ2VfbGVzc29uLmdyaWQocm93PTAsY29sdW1uPTIsc3RpY2s9J25zd2UnKQ0KCQlzZWxmLmJhY2tUT0NfbGVzc29uLmNvbmZpZyh0ZXh0PSJSZXR1cm4gdG8gVC5PLkMuIChyKSIsZm9udD1zZWxmLmZvb3RGb250LGJhY2tncm91bmQ9c2VsZi5mb290ZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5mb290ZXJmZ2NvbG9yLHJlbGllZj1zZWxmLmJ1dHRvblJlbGllZikNCgkJc2VsZi5wcmV2UGFnZV9sZXNzb24uY29uZmlnKHRleHQ9IlByZXZpb3VzIFBhZ2UgKHApIixmb250PXNlbGYuZm9vdEZvbnQsYmFja2dyb3VuZD1zZWxmLmZvb3RlcmJnY29sb3IsZm9yZWdyb3VuZD1zZWxmLmZvb3RlcmZnY29sb3IscmVsaWVmPXNlbGYuYnV0dG9uUmVsaWVmKQ0KCQlzZWxmLm5leHRQYWdlX2xlc3Nvbi5jb25maWcodGV4dD0iTmV4dCBQYWdlIChuKSIsZm9udD1zZWxmLmZvb3RGb250LGJhY2tncm91bmQ9c2VsZi5mb290ZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5mb290ZXJmZ2NvbG9yLHJlbGllZj1zZWxmLmJ1dHRvblJlbGllZikNCgkJc2VsZi5iYWNrVE9DX2xlc3Nvbi5jb25maWcoY29tbWFuZD1zZWxmLmJhY2tUT0NfbGVzc29uX2NhbGxiYWNrKQ0KCQlzZWxmLm5leHRQYWdlX2xlc3Nvbi5jb25maWcoY29tbWFuZD1zZWxmLm5leHRQYWdlX2xlc3Nvbl9jYWxsYmFjaykNCgkJc2VsZi5wcmV2UGFnZV9sZXNzb24uY29uZmlnKGNvbW1hbmQ9c2VsZi5wcmV2UGFnZV9sZXNzb25fY2FsbGJhY2spDQoNCg0KCWRlZiBwcmV2UGFnZV9sZXNzb25fY2FsbGJhY2soc2VsZik6DQoJCUlEID0gc2VsZi5sb2FkSUQNCgkJaW5kID0gc2VsZi5wYWdlSUQuaW5kZXgoSUQpDQoJCXNlbGYubGVzc29uRnJhbWUuZm9yZ2V0KCkNCgkJaWYgaW5kPT0wOg0KCQkJc2VsZi50b2NGcmFtZS5wYWNrKGV4cGFuZD1UcnVlLGZpbGw9Qk9USCkNCgkJCXNlbGYucHJlcGFyZVRPQygpDQoJCWVsc2U6DQoJCQlzZWxmLmxvYWRJRCA9IHNlbGYucGFnZUlEW2luZC0xXQ0KCQkJc2VsZi5sb2FkUGFnZV9jYWxsYmFjaygpDQoNCglkZWYgbmV4dFBhZ2VfbGVzc29uX2NhbGxiYWNrKHNlbGYpOg0KCQlJRCA9IHNlbGYubG9hZElEDQoJCWluZCA9IHNlbGYucGFnZUlELmluZGV4KElEKQ0KCQluZXh0SUQgPSBzZWxmLnBhZ2VJRFtpbmQrMV0NCgkJc2VsZi5sb2FkSUQgPSBuZXh0SUQNCgkJc2VsZi5sZXNzb25GcmFtZS5mb3JnZXQoKQ0KCQlzZWxmLmxvYWRQYWdlX2NhbGxiYWNrKCkNCg0KCWRlZiBiYWNrVE9DX2xlc3Nvbl9jYWxsYmFjayhzZWxmKToNCgkJc2VsZi5sZXNzb25GcmFtZS5mb3JnZXQoKQ0KCQlzZWxmLnRvY0ZyYW1lLnBhY2soZXhwYW5kPVRydWUsZmlsbD1CT1RIKQ0KCQlzZWxmLnByZXBhcmVUT0MoKQ0KDQoJZGVmIGxvYWRMZXNzb24oc2VsZik6DQoJCUlEID0gc2VsZi5sb2FkSUQNCgkJaWYgbm90IHNlbGYubGVzc29uRGF0YVtJRF1bJ2ZpbGVFeGlzdHMnXToNCgkJCXNlbGYubG9hZE5PRklMRSgpDQoJCWVsc2U6DQoJCQlkYXRhID0gc2VsZi5sZXNzb25EYXRhW0lEXQ0KCQkJc2VsZi50aXRsZV9sZXNzb24uY29uZmlnKHRleHQgPSBkYXRhWydjaGFwdGVyJ10pDQoJCQlzZWxmLnN1YnRpdGxlX2xlc3Nvbi5jb25maWcodGV4dD1kYXRhWydzZWN0aW9uJ10pDQoJCQlzZWxmLnN1YnNlY3Rpb25fbGVzc29uLmNvbmZpZyh0ZXh0PWRhdGFbJ3N1YnNlY3Rpb24nXSkNCgkJCXNlbGYuaW1hZ2VfbGVzc29uLmNvbmZpZyhpbWFnZT1kYXRhWydpbWcnXSkNCgkJCXNlbGYuYmlnSWRlYV90ZXh0LmNvbmZpZyh0ZXh0PWRhdGFbJ2JpZ0lkZWEnXS5zdHJpcCgnXG4nKSxmb3JlZ3JvdW5kPXNlbGYuYmlnSWRlYUNvbG9yKQ0KCQkJc2VsZi5leHBsYW5hdGlvbl90ZXh0LmNvbmZpZyh0ZXh0PWRhdGFbJ2V4cGxhbmF0aW9uJ10pDQoJCQlzZWxmLmxlc3NvbkZyYW1lLnBhY2soZXhwYW5kPVRydWUsZmlsbD1CT1RIKQ0KCQkJc2VsZi53aGljaEZyYW1lID0gJ2xlc3NvbicNCgkJcmV0dXJuDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCQkNCiMjIyMjIyMjIyMjIyMjIyBFWEFNUExFIEZSQU1FIE1FVEhPRFMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCglkZWYgY3JlYXRlRVhBTVBMRShzZWxmKToNCgkJIyBjcmVhdGUgd2lkZ2V0cw0KCQlzZWxmLmV4YW1wbGVGcmFtZSA9IHR0ay5GcmFtZShzZWxmLnJvb3QpDQoNCgkJc2VsZi5oZWFkX2V4YW1wbGUgPSB0dGsuRnJhbWUoc2VsZi5leGFtcGxlRnJhbWUpDQoJCXNlbGYuYm9keV9leGFtcGxlID0gdHRrLkZyYW1lKHNlbGYuZXhhbXBsZUZyYW1lKQ0KCQlzZWxmLmZvb3RfZXhhbXBsZSA9IHR0ay5GcmFtZShzZWxmLmV4YW1wbGVGcmFtZSkNCgkJc2VsZi5sb2dvX2V4YW1wbGUgPSB0dGsuTGFiZWwoc2VsZi5oZWFkX2V4YW1wbGUpDQoJCXNlbGYudGl0bGVfZXhhbXBsZSA9IHR0ay5MYWJlbChzZWxmLmhlYWRfZXhhbXBsZSkNCgkJc2VsZi5zdWJ0aXRsZV9leGFtcGxlID0gdHRrLkxhYmVsKHNlbGYuaGVhZF9leGFtcGxlKQ0KCQlzZWxmLnN1YnNlY3Rpb25fZXhhbXBsZSA9IHR0ay5MYWJlbChzZWxmLmhlYWRfZXhhbXBsZSkNCg0KCQlzZWxmLmNvZGVGcmFtZSA9IHR0ay5MYWJlbGZyYW1lKHNlbGYuYm9keV9leGFtcGxlLHRleHQ9J1NPVVJDRSBDT0RFJykNCgkJc2VsZi5vdXRwdXRGcmFtZSA9IHR0ay5MYWJlbEZyYW1lKHNlbGYuYm9keV9leGFtcGxlLHRleHQ9J1NDUkVFTiBPVVRQVVQnKQ0KCQlzZWxmLmFkZHJlc3NGcmFtZSA9IHR0ay5MYWJlbEZyYW1lKHNlbGYuYm9keV9leGFtcGxlLHRleHQ9J1NZTUJPTCBUQUJMRScpDQoJCXNlbGYuZmxvd0ZyYW1lID0gdHRrLkxhYmVsRnJhbWUoc2VsZi5ib2R5X2V4YW1wbGUsdGV4dD0nUHJvZ3JhbSBDb3VudGVyJykNCgkJc2VsZi5ub3Rlc0ZyYW1lID0gdHRrLkxhYmVsRnJhbWUoc2VsZi5ib2R5X2V4YW1wbGUsdGV4dD0nTk9URVMnKQ0KCQlzZWxmLmNvZGVUZXh0ID0gVGV4dChzZWxmLmNvZGVGcmFtZSkNCgkJc2VsZi5vdXRwdXRUZXh0ID0gVGV4dChzZWxmLm91dHB1dEZyYW1lKQ0KCQlzZWxmLnZhckZyYW1lID0gdHRrLkxhYmVsRnJhbWUoc2VsZi5hZGRyZXNzRnJhbWUsdGV4dD0nT2JqZWN0IE5hbWUnKQ0KCQlzZWxmLnZhbEZyYW1lID0gdHRrLkxhYmVsRnJhbWUoc2VsZi5hZGRyZXNzRnJhbWUsdGV4dD0nVmFsdWUnKQ0KCQlzZWxmLnZhckRhdGEgPSBUZXh0KHNlbGYudmFyRnJhbWUpDQoJCXNlbGYudmFsRGF0YSA9IFRleHQoc2VsZi52YWxGcmFtZSkNCgkJc2VsZi5mbG93Q29udHJvbCA9IHR0ay5TcGluYm94KHNlbGYuZmxvd0ZyYW1lKQ0KCQlzZWxmLm5vdGVzVGV4dCA9IFRleHQoc2VsZi5ub3Rlc0ZyYW1lKQ0KCQlzZWxmLmJhY2tUT0NfZXhhbXBsZSA9IEJ1dHRvbihzZWxmLmZvb3RfZXhhbXBsZSkNCgkJc2VsZi5wcmV2UGFnZV9leGFtcGxlID0gQnV0dG9uKHNlbGYuZm9vdF9leGFtcGxlKQ0KCQlzZWxmLm5leHRQYWdlX2V4YW1wbGUgPSBCdXR0b24oc2VsZi5mb290X2V4YW1wbGUpDQoNCgkJIyBzZXR1cCB3aWRnZXRzDQoJCXNlbGYuZXhhbXBsZUZyYW1lLnJvd2NvbmZpZ3VyZSgwLHdlaWdodD0wKQ0KCQlzZWxmLmV4YW1wbGVGcmFtZS5yb3djb25maWd1cmUoMSx3ZWlnaHQ9MCkNCgkJc2VsZi5leGFtcGxlRnJhbWUucm93Y29uZmlndXJlKDIsd2VpZ2h0PTEpDQoJCXNlbGYuZXhhbXBsZUZyYW1lLmNvbHVtbmNvbmZpZ3VyZSgwLHdlaWdodD0xKQ0KCQlzZWxmLmhlYWRfZXhhbXBsZS5ncmlkKHJvdz0wLGNvbHVtbj0wLHN0aWNrPSdud3NlJykNCgkJc2VsZi5ib2R5X2V4YW1wbGUuZ3JpZChyb3c9MSxjb2x1bW49MCxzdGljaz0nbndzZScpDQoJCXNlbGYuZm9vdF9leGFtcGxlLmdyaWQocm93PTIsY29sdW1uPTAsc3RpY2s9J253c2UnKQ0KCQlzZWxmLmhlYWRfZXhhbXBsZS5yb3djb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX2V4YW1wbGUucm93Y29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF9leGFtcGxlLnJvd2NvbmZpZ3VyZSgyLHdlaWdodD0xKQ0KCQlzZWxmLmhlYWRfZXhhbXBsZS5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MCkNCgkJc2VsZi5oZWFkX2V4YW1wbGUuY29sdW1uY29uZmlndXJlKDEsd2VpZ2h0PTEpDQoNCgkJc2VsZi5ib2R5X2V4YW1wbGUuY29sdW1uY29uZmlndXJlKDEsd2VpZ2h0PTEpDQoNCgkJc2VsZi5mb290X2V4YW1wbGUucm93Y29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuZm9vdF9leGFtcGxlLmNvbHVtbmNvbmZpZ3VyZSgwLHdlaWdodD0xKQ0KCQlzZWxmLmZvb3RfZXhhbXBsZS5jb2x1bW5jb25maWd1cmUoMSx3ZWlnaHQ9MSkNCgkJc2VsZi5mb290X2V4YW1wbGUuY29sdW1uY29uZmlndXJlKDIsd2VpZ2h0PTEpDQoNCgkJIyBoZWFkDQoJCXNlbGYuaGVhZF9leGFtcGxlLmNvbmZpZyhyZWxpZWY9J3JpZGdlJykNCgkJc2VsZi5sb2dvX2V4YW1wbGUuZ3JpZChyb3c9MCxjb2x1bW49MCxyb3dzcGFuPTMsc3RpY2s9J25zd2UnKQ0KCQlzZWxmLnRpdGxlX2V4YW1wbGUuZ3JpZChyb3c9MCxjb2x1bW49MSxzdGljaz0nbnN3ZScpDQoJCXNlbGYuc3VidGl0bGVfZXhhbXBsZS5ncmlkKHJvdz0xLGNvbHVtbj0xLHN0aWNrPSduc3dlJykNCgkJc2VsZi5zdWJzZWN0aW9uX2V4YW1wbGUuZ3JpZChyb3c9Mixjb2x1bW49MSxzdGljaz0nbnN3ZScpDQoJCXNlbGYubG9nb19leGFtcGxlLmNvbmZpZyhpbWFnZT1zZWxmLmxvZ29fc21hbGwsYmFja2dyb3VuZD1zZWxmLmhlYWRlcmJnY29sb3IsZm9yZWdyb3VuZD1zZWxmLmhlYWRlcmZnY29sb3IpDQoJCXNlbGYudGl0bGVfZXhhbXBsZS5jb25maWcoZm9udD1zZWxmLnRpdGxlRm9udCxiYWNrZ3JvdW5kPXNlbGYuaGVhZGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuaGVhZGVyZmdjb2xvcikNCgkJc2VsZi5zdWJ0aXRsZV9leGFtcGxlLmNvbmZpZyhmb250PXNlbGYuc3VidGl0bGVGb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KCQlzZWxmLnN1YnNlY3Rpb25fZXhhbXBsZS5jb25maWcoZm9udD1zZWxmLnN1YnNlY3Rpb25Gb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KDQoJCSMgYm9keSANCgkJc2VsZi5ib2R5X2V4YW1wbGUuY29uZmlnKHBhZD0wKQ0KCQlzZWxmLmNvZGVGcmFtZS5ncmlkKHJvdz0wLGNvbHVtbj0wLHJvd3NwYW49NCxzdGljaz0nbncnKQ0KCQlzZWxmLm91dHB1dEZyYW1lLmdyaWQocm93PTQsY29sdW1uPTAscm93c3Bhbj00LHN0aWNrPSdudycpDQoJCXNlbGYuZmxvd0ZyYW1lLmdyaWQocm93PTMsY29sdW1uPTEscm93c3Bhbj0xLHN0aWNrPSdudycpDQoJCXNlbGYubm90ZXNGcmFtZS5ncmlkKHJvdz00LGNvbHVtbj0xLHJvd3NwYW49MyxzdGljaz0nbncnKQ0KCQlzZWxmLmFkZHJlc3NGcmFtZS5ncmlkKHJvdz0wLGNvbHVtbj0xLHJvd3NwYW49MyxzdGljaz0nbncnKQ0KCQlzZWxmLmNvZGVGcmFtZS5jb25maWcobGFiZWxhbmNob3I9J24nKQkNCgkJc2VsZi5vdXRwdXRGcmFtZS5jb25maWcobGFiZWxhbmNob3I9J24nKQkNCgkJc2VsZi5hZGRyZXNzRnJhbWUuY29uZmlnKGxhYmVsYW5jaG9yPSduJykNCgkJc2VsZi5ub3Rlc0ZyYW1lLmNvbmZpZyhsYWJlbGFuY2hvcj0nbicpCQkNCgkJc2VsZi52YXJGcmFtZS5jb25maWcobGFiZWxhbmNob3I9J253JykNCgkJc2VsZi52YWxGcmFtZS5jb25maWcobGFiZWxhbmNob3I9J253JykJDQoJCXNlbGYuY29kZVRleHQucGFjaygpDQoJCXNlbGYub3V0cHV0VGV4dC5wYWNrKCkNCgkJc2VsZi52YXJGcmFtZS5ncmlkKHJvdz0wLGNvbHVtbj0wKQ0KCQlzZWxmLnZhbEZyYW1lLmdyaWQocm93PTAsY29sdW1uPTEsY29sdW1uc3Bhbj0yKQ0KCQlzZWxmLnZhckRhdGEucGFjaygpDQoJCXNlbGYudmFsRGF0YS5wYWNrKCkNCgkJc2VsZi5mbG93Q29udHJvbC5wYWNrKCkNCgkJc2VsZi5ub3Rlc1RleHQucGFjaygpDQoNCgkJIyBmb290DQoJCXNlbGYuYmFja1RPQ19leGFtcGxlLmdyaWQocm93PTAsY29sdW1uPTAsc3RpY2s9J25zd2UnKQ0KCQlzZWxmLnByZXZQYWdlX2V4YW1wbGUuZ3JpZChyb3c9MCxjb2x1bW49MSxzdGljaz0nbnN3ZScpDQoJCXNlbGYubmV4dFBhZ2VfZXhhbXBsZS5ncmlkKHJvdz0wLGNvbHVtbj0yLHN0aWNrPSduc3dlJykNCgkJc2VsZi5iYWNrVE9DX2V4YW1wbGUuY29uZmlnKHRleHQ9IlJldHVybiB0byBULk8uQy4gKHIpIixmb250PXNlbGYuZm9vdEZvbnQsYmFja2dyb3VuZD1zZWxmLmZvb3RlcmJnY29sb3IsZm9yZWdyb3VuZD1zZWxmLmZvb3RlcmZnY29sb3IscmVsaWVmPXNlbGYuYnV0dG9uUmVsaWVmKQ0KCQlzZWxmLnByZXZQYWdlX2V4YW1wbGUuY29uZmlnKHRleHQ9IlByZXZpb3VzIFBhZ2UgKHApIixmb250PXNlbGYuZm9vdEZvbnQsYmFja2dyb3VuZD1zZWxmLmZvb3RlcmJnY29sb3IsZm9yZWdyb3VuZD1zZWxmLmZvb3RlcmZnY29sb3IscmVsaWVmPXNlbGYuYnV0dG9uUmVsaWVmKQ0KCQlzZWxmLm5leHRQYWdlX2V4YW1wbGUuY29uZmlnKHRleHQ9Ik5leHQgUGFnZSAobikiLGZvbnQ9c2VsZi5mb290Rm9udCxiYWNrZ3JvdW5kPXNlbGYuZm9vdGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuZm9vdGVyZmdjb2xvcixyZWxpZWY9c2VsZi5idXR0b25SZWxpZWYpDQoJCXNlbGYuYmFja1RPQ19leGFtcGxlLmNvbmZpZyhjb21tYW5kPXNlbGYuYmFja1RPQ19leGFtcGxlX2NhbGxiYWNrKQ0KDQoJCSMjIENPREUgRlJBTUUgIyMNCgkJc2VsZi5jb2RlVGV4dC5jb25maWcoaGVpZ2h0PTEzLHdpZHRoPTUyKQ0KCQlzZWxmLmNvZGVUZXh0LmNvbmZpZyhmb250PXNlbGYuY29kZUZvbnQpDQoJCSMjIE9VVFBVVCBGUkFNRSAjIw0KCQlzZWxmLm91dHB1dFRleHQuY29uZmlnKGhlaWdodD0xMCx3aWR0aD01MikNCgkJc2VsZi5vdXRwdXRUZXh0LmNvbmZpZyhmb250PXNlbGYub3V0cHV0Rm9udCkNCgkJIyMgQUREUkVTUyBGUkFNRSAjIw0KCQlzZWxmLnZhckRhdGEuY29uZmlnKHdpZHRoPTEwLGhlaWdodD0xMCkNCgkJc2VsZi52YXJEYXRhLmNvbmZpZyh3cmFwPSd3b3JkJykNCgkJc2VsZi52YWxEYXRhLmNvbmZpZyh3aWR0aD0zNixoZWlnaHQ9MTApDQoJCXNlbGYudmFsRGF0YS5jb25maWcod3JhcD0nd29yZCcpDQoJCXNlbGYudmFyRGF0YS5jb25maWcoZm9udD1zZWxmLmFkZHJlc3NGb250KQ0KCQlzZWxmLnZhbERhdGEuY29uZmlnKGZvbnQ9c2VsZi5hZGRyZXNzRm9udCkNCgkJIyMgRkxPVyBGUkFNRSAjIw0KCQkjc2VsZi5mbG93RnJhbWUuY29uZmlnKHdpZHRoPTYwKQ0KCQlzZWxmLmZsb3dDb250cm9sLmNvbmZpZyhzdGF0ZT0ncmVhZG9ubHknLHdpZHRoPTMpDQoJCSMjIE5PVEVTIEZSQU1FICMjDQoJCXNlbGYubm90ZXNUZXh0LmNvbmZpZyhoZWlnaHQ9MTAsd2lkdGggPSA0OCx3cmFwPSd3b3JkJykNCgkJc2VsZi5ub3Rlc1RleHQuY29uZmlnKGZvbnQ9c2VsZi5ub3Rlc0ZvbnQpDQoJCSMgY2FsbGJhY2tzDQoJCXNlbGYubmV4dFBhZ2VfZXhhbXBsZS5jb25maWcoY29tbWFuZD1zZWxmLm5leHRQYWdlX2V4YW1wbGVfY2FsbGJhY2spDQoJCXNlbGYucHJldlBhZ2VfZXhhbXBsZS5jb25maWcoY29tbWFuZD1zZWxmLnByZXZQYWdlX2V4YW1wbGVfY2FsbGJhY2spDQoNCg0KCWRlZiBwcmV2UGFnZV9leGFtcGxlX2NhbGxiYWNrKHNlbGYpOg0KCQlJRCA9IHNlbGYubG9hZElEDQoJCWluZCA9IHNlbGYucGFnZUlELmluZGV4KElEKQ0KCQlzZWxmLmV4YW1wbGVGcmFtZS5mb3JnZXQoKQ0KCQlpZiBpbmQ9PTA6DQoJCQlzZWxmLnRvY0ZyYW1lLnBhY2soZXhwYW5kPVRydWUsZmlsbD1CT1RIKQ0KCQkJc2VsZi5wcmVwYXJlVE9DKCkNCgkJZWxzZToNCgkJCXNlbGYubG9hZElEID0gc2VsZi5wYWdlSURbaW5kLTFdDQoJCQlzZWxmLmxvYWRQYWdlX2NhbGxiYWNrKCkNCg0KCWRlZiBuZXh0UGFnZV9leGFtcGxlX2NhbGxiYWNrKHNlbGYpOg0KCQlJRCA9IHNlbGYubG9hZElEDQoJCWluZCA9IHNlbGYucGFnZUlELmluZGV4KElEKQ0KCQluZXh0SUQgPSBzZWxmLnBhZ2VJRFtpbmQrMV0NCgkJc2VsZi5sb2FkSUQgPSBuZXh0SUQNCgkJc2VsZi5leGFtcGxlRnJhbWUuZm9yZ2V0KCkNCgkJc2VsZi5sb2FkUGFnZV9jYWxsYmFjaygpDQoNCglkZWYgYmFja1RPQ19leGFtcGxlX2NhbGxiYWNrKHNlbGYpOg0KCQlzZWxmLmV4YW1wbGVGcmFtZS5mb3JnZXQoKQ0KCQlzZWxmLnRvY0ZyYW1lLnBhY2soZXhwYW5kPVRydWUsZmlsbD1CT1RIKQ0KCQlzZWxmLnByZXBhcmVUT0MoKQ0KDQoJZGVmIGxvYWRFeGFtcGxlKHNlbGYpOg0KCQlJRCA9IHNlbGYubG9hZElEDQoJCWlmIG5vdCBzZWxmLmV4YW1wbGVEYXRhW0lEXVsnZmlsZUV4aXN0cyddOg0KCQkJc2VsZi5sb2FkTk9GSUxFKCkNCgkJZWxzZToNCgkJCXNlbGYuY29kZVRleHQuY29uZmlnKHN0YXRlPSdub3JtYWwnKQ0KCQkJc2VsZi5saW5lTnVtPWxpc3QoKQ0KCQkJc2VsZi52YXJEaWN0PWxpc3QoKQ0KCQkJc2VsZi5ldmVudD1saXN0KCkNCgkJCXNlbGYuYXJncz1saXN0KCkNCgkJCXNlbGYuY29kZVRleHQuZGVsZXRlKCcxLjAnLCAnZW5kJykNCgkJCXNlbGYub3V0cHV0VGV4dC5kZWxldGUoJzEuMCcsICdlbmQnKQ0KCQkJc2VsZi52YXJEYXRhLmRlbGV0ZSgnMS4wJywgJ2VuZCcpDQoJCQlzZWxmLnZhbERhdGEuZGVsZXRlKCcxLjAnLCAnZW5kJykNCgkJCXNlbGYubm90ZXNUZXh0LmRlbGV0ZSgnMS4wJywgJ2VuZCcpDQoJCQlzZWxmLmZsb3dDb250cm9sLnNldCgxKQ0KCQkJZGF0YSA9IHNlbGYuZXhhbXBsZURhdGFbSURdDQoJCQlzZWxmLmV4YW1wbGVGcmFtZS5wYWNrKGV4cGFuZD1UcnVlLGZpbGwgPSBCT1RIKQ0KCQkJc2VsZi50aXRsZV9leGFtcGxlLmNvbmZpZyh0ZXh0ID0gZGF0YVsnY2hhcHRlciddKQ0KCQkJc2VsZi5zdWJ0aXRsZV9leGFtcGxlLmNvbmZpZyh0ZXh0PWRhdGFbJ3NlY3Rpb24nXSkNCgkJCXNlbGYuc3Vic2VjdGlvbl9leGFtcGxlLmNvbmZpZyh0ZXh0PWRhdGFbJ3N1YnNlY3Rpb24nXSkNCgkJCXNlbGYuYW5hbHl6ZUNvZGUoc2VsZi5mdW5jRGljdFtJRF0pDQoJCQl2YWxMaXN0ID0gbGlzdChyYW5nZSgxLGxlbihzZWxmLmxpbmVOdW0pLTEpKQ0KCQkJdmFsTGlzdC5yZXZlcnNlKCkNCgkJCXNlbGYuZmxvd0NvbnRyb2wuY29uZmlnKHZhbHVlcz12YWxMaXN0LGluY3JlbWVudD0tMS4wKQ0KCQkJc2VsZi5mbG93Q29udHJvbC5jb25maWcoY29tbWFuZD1zZWxmLmNoYW5nZUluZGV4KQ0KCQkJc2VsZi5sb2FkQ29kZSgpDQoJCQlzZWxmLmNhcHR1cmVPdXRwdXQoc2VsZi5mdW5jRGljdFtJRF0pDQoJCQlzZWxmLmJ1aWxkQ2FwTGlzdCgpDQoJCQlzZWxmLmNoYW5nZUluZGV4KCkNCgkJCXNlbGYuY29kZVRleHQuY29uZmlnKHN0YXRlPSdkaXNhYmxlZCcpDQoJCQlzZWxmLndoaWNoRnJhbWUgPSAnZXhhbXBsZScNCgkJcmV0dXJuDQoNCglkZWYgYW5hbHl6ZUNvZGUoc2VsZixmb28pOg0KCQlkZWYgdHJhY2VfY2FsbGJhY2soZnJhbWUsZXZlbnQsYXJncyk6DQoJCQl0ZW1wRGljdCA9IGRpY3QoZnJhbWUuZl9sb2NhbHMpDQoJCQlpZiAnc2VsZicgaW4gdGVtcERpY3Q6DQoJCQkJZGVsIHRlbXBEaWN0WydzZWxmJ10NCgkJCXNlbGYudmFyRGljdC5hcHBlbmQodGVtcERpY3QpDQoJCQlzZWxmLmxpbmVOdW0uYXBwZW5kKGZyYW1lLmZfbGluZW5vKQ0KCQkJc2VsZi5ldmVudC5hcHBlbmQoZXZlbnQpDQoJCQlzZWxmLmFyZ3MuYXBwZW5kKGFyZ3MpDQoNCgkJCWlmIGV2ZW50PT0icmV0dXJuIjoNCgkJCQlzZWxmLmxhc3RDYWxsZWQgPSBmcmFtZS5mX2JhY2suZl9saW5lbm8NCgkJCWlmIHNlbGYuZXZlbnRbbGVuKHNlbGYubGluZU51bSktMV09PSJyZXR1cm4iOg0KCQkJCXNlbGYubGluZU51bVstMV0gPSBzZWxmLmxhc3RDYWxsZWQNCg0KCQkJcmV0dXJuIHRyYWNlX2NhbGxiYWNrDQoNCgkJc3lzLnNldHRyYWNlKHRyYWNlX2NhbGxiYWNrKQ0KCQlmb28oKQ0KCQlzeXMuc2V0dHJhY2UoTm9uZSkNCgkJcGF0aCA9IHNlbGYucGFnZURhdGFQYXRoKycvYzAxczAyaDAyLnR4dCcgIyBob3BlZnVsbHkgdGhpcyB3aWxsIHRyaWNrIHRoZSBzdHVkZW50cw0KCQlmaWxlID0gb3BlbihwYXRoLCdyJykNCgkJcmF3Q29kZSA9IGZpbGUucmVhZGxpbmVzKCkNCgkJZmlsZS5jbG9zZSgpDQoJCWNvZGVJbmRzID0gbGlzdChyYW5nZShzZWxmLmxpbmVOdW1bMV0tMSxzZWxmLmxpbmVOdW1bLTJdKSkNCgkJc2VsZi5jb2RlID0gbGlzdCgpDQoJCWZvciBpIGluIGNvZGVJbmRzOg0KCQkJc2VsZi5jb2RlLmFwcGVuZChyYXdDb2RlW2ldKQ0KDQoJCWZvciBpIGluIHJhbmdlKGxlbihzZWxmLmxpbmVOdW0pKToNCgkJCXNlbGYubGluZU51bVtpXT1zZWxmLmxpbmVOdW1baV0tY29kZUluZHNbMF0NCg0KCWRlZiBjaGFuZ2VJbmRleChzZWxmKToNCgkJSUQgPSBzZWxmLmxvYWRJRA0KCQlzZWxmLm91dHB1dFRleHQuY29uZmlnKHN0YXRlPSdub3JtYWwnKQ0KCQlzZWxmLnZhckRhdGEuY29uZmlnKHN0YXRlPSdub3JtYWwnKQ0KCQlzZWxmLnZhbERhdGEuY29uZmlnKHN0YXRlPSdub3JtYWwnKQ0KCQl2YWwgPSBzZWxmLmxpbmVOdW1baW50KHNlbGYuZmxvd0NvbnRyb2wuZ2V0KCkpXQ0KCQl2YWwgPSBpbnQodmFsKQ0KCQlmb3IgaSBpbiByYW5nZSh2YWwpOg0KCQkJc2VsZi5jb2RlVGV4dC50YWdfYWRkKHN0cihpKSxzdHIoaSkrJy4wJyxzdHIoaSkrJy5lbmQnKSANCgkJCXNlbGYuY29kZVRleHQudGFnX2NvbmZpZ3VyZShzdHIoaSksYmFja2dyb3VuZD0nJykNCgkJaWYgdmFsPjE6DQoJCQlzZWxmLmNvZGVUZXh0LnRhZ19hZGQoc3RyKGkpLHN0cihpKSsnLjAnLHN0cihpKSsnLmVuZCcpIA0KCQkJc2VsZi5jb2RlVGV4dC50YWdfY29uZmlndXJlKHN0cihpKSxiYWNrZ3JvdW5kPSdyZWQnKQkNCgkJc2VsZi5jb2RlVGV4dC50YWdfYWRkKHN0cih2YWwpLHN0cih2YWwpKycuMCcsc3RyKHZhbCkrJy5lbmQnKSANCgkJc2VsZi5jb2RlVGV4dC50YWdfY29uZmlndXJlKHN0cih2YWwpLGJhY2tncm91bmQ9J2dyZWVuJykNCgkJZm9yIGkgaW4gcmFuZ2UodmFsKzEsbGVuKHNlbGYuY29kZSkrMSk6DQoJCQlzZWxmLmNvZGVUZXh0LnRhZ19hZGQoc3RyKGkpLHN0cihpKSsnLjAnLHN0cihpKSsnLmVuZCcpIA0KCQkJc2VsZi5jb2RlVGV4dC50YWdfY29uZmlndXJlKHN0cihpKSxiYWNrZ3JvdW5kPScnKQ0KDQoJCWRpY3RMaXN0ID0gbGlzdChzZWxmLnZhckRpY3RbaW50KHNlbGYuZmxvd0NvbnRyb2wuZ2V0KCkpXS5pdGVtcygpKQ0KCQlzZWxmLnZhckRhdGEuZGVsZXRlKCcxLjAnLCdlbmQnKQ0KCQlzZWxmLnZhbERhdGEuZGVsZXRlKCcxLjAnLCdlbmQnKQ0KCQlmb3IgaSBpbiByYW5nZShsZW4oZGljdExpc3QpKToNCgkJCXNlbGYudmFyRGF0YS5pbnNlcnQoc3RyKGkrMSkrJy4wJyxzdHIoZGljdExpc3RbaV1bMF0pKydcbicpDQoJCQlzZWxmLnZhbERhdGEuaW5zZXJ0KHN0cihpKzEpKycuMCcsc3RyKGRpY3RMaXN0W2ldWzFdKSsnXG4nKQ0KCQkNCgkJc2VsZi5vdXRwdXRUZXh0LmRlbGV0ZSgnMS4wJywnZW5kJykNCgkJZm9yIGkgaW4gcmFuZ2UoaW50KHNlbGYuZmxvd0NvbnRyb2wuZ2V0KCkpKToNCgkJCWlmIHNlbGYuY2FwdHVyZUxpc3RbaV0hPSdTVEVQISEhU1RFUCc6DQoJCQkJc2VsZi5vdXRwdXRUZXh0Lmluc2VydCgnZW5kJyxzZWxmLmNhcHR1cmVMaXN0W2ldKydcbicpDQoJCXNlbGYub3V0cHV0VGV4dC5jb25maWcoc3RhdGU9J2Rpc2FibGVkJykNCgkJc2VsZi52YXJEYXRhLmNvbmZpZyhzdGF0ZT0nZGlzYWJsZWQnKQ0KCQlzZWxmLnZhbERhdGEuY29uZmlnKHN0YXRlPSdkaXNhYmxlZCcpDQoNCgkJaWYgdmFsIGluIHNlbGYuZXhhbXBsZURhdGFbSURdOg0KCQkJc2VsZi5ub3Rlc1RleHQuZGVsZXRlKCcxLjAnLCdlbmQnKQ0KCQkJc2VsZi5ub3Rlc1RleHQuaW5zZXJ0KCcxLjAnLHNlbGYuZXhhbXBsZURhdGFbSURdW3ZhbF0pDQoNCglkZWYgY2FwdHVyZU91dHB1dChzZWxmLGZvbyk6DQoJCWYgPSBpby5TdHJpbmdJTygpDQoJCXdpdGggcmVkaXJlY3Rfc3Rkb3V0KGYpOg0KCQkJZGVmIGNhcHR1cmVfY2FsbGJhY2soZnJhbWUsZXZlbnQsYXJncyk6DQoJCQkJcHJpbnQoIlNURVAhISFTVEVQIikNCgkJCQlyZXR1cm4gY2FwdHVyZV9jYWxsYmFjaw0KCQkJc3lzLnNldHRyYWNlKGNhcHR1cmVfY2FsbGJhY2spDQoJCQlmb28oKQ0KCQkJc3lzLnNldHRyYWNlKE5vbmUpDQoJCXNlbGYuY2FwdHVyZSA9IGYuZ2V0dmFsdWUoKQ0KDQoNCglkZWYgYnVpbGRDYXBMaXN0KHNlbGYpOg0KCQlpbmQgPSAxDQoJCXN0cmluZyA9IHNlbGYuY2FwdHVyZQ0KCQljYXB0dXJlTGlzdCA9IGxpc3QoKQ0KCQl3aGlsZSBpbmQhPS0xOg0KCQkJaW5kID0gc3RyaW5nLmZpbmQoJ1xuJykNCgkJCWlmIGluZCE9LTE6DQoJCQkJY2FwdHVyZUxpc3QuYXBwZW5kKHN0cmluZ1s6aW5kXSkNCgkJCWVsc2U6DQoJCQkJYnJlYWsNCgkJCXN0cmluZyA9IHN0cmluZ1tpbmQrMTpdDQoNCgkJc2VsZi5jYXB0dXJlTGlzdCA9IGxpc3QoKQ0KCQlmb3IgaSBpbiByYW5nZShsZW4oY2FwdHVyZUxpc3QpLTEpOg0KCQkJaWYgY2FwdHVyZUxpc3RbaSsxXT09IlNURVAhISFTVEVQIjoNCgkJCQlzZWxmLmNhcHR1cmVMaXN0LmFwcGVuZChjYXB0dXJlTGlzdFtpXSkNCg0KDQoJZGVmIHJlcGxhY2VUYWJzKHNlbGYsc3RyaW5nKToNCgkJaW5kID0gMQ0KCQl3aGlsZSBpbmQhPS0xOg0KCQkJaW5kID0gc3RyaW5nLmZpbmQoJ1x0JykNCgkJCWlmIGluZD09LTE6DQoJCQkJYnJlYWsNCgkJCXN0cmluZyA9IHN0cmluZ1s6aW5kXSsnICAgICcrc3RyaW5nW2luZCsxOl0NCgkJcmV0dXJuIHN0cmluZw0KDQoJZGVmIGxvYWRDb2RlKHNlbGYpOg0KCQlmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5jb2RlKSk6DQoJCQlpbmQgPSBzdHIoaSsxKSsiLjAiDQoJCQlzdHJpbmcgPSBzZWxmLmNvZGVbaV1bMjpdDQoJCQlzdHJpbmcgPSBzZWxmLnJlcGxhY2VUYWJzKHN0cmluZykNCgkJCWlmIGkhPWxlbihzZWxmLmNvZGUpLTE6DQoJCQkJc3RyaW5nID0gIns6MDJkfSAge30iLmZvcm1hdChpKzEsc3RyaW5nKQ0KCQkJZWxzZToNCgkJCQlzdHJpbmcgPSAiezowMmR9ICB7fSIuZm9ybWF0KGkrMSwiRU9GIikNCgkJCXNlbGYuY29kZVRleHQuaW5zZXJ0KGluZCxzdHJpbmcpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyBQUkFDVElDRSBGUkFNRSBNRVRIT0RTICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KCWRlZiBjcmVhdGVQUkFDVElDRShzZWxmKToNCgkJIyMgY3JlYXRlIHdpZGdldHMgIyMNCgkJc2VsZi5wcmFjdGljZUZyYW1lID0gdHRrLkZyYW1lKHNlbGYucm9vdCkNCgkJc2VsZi5oZWFkX3ByYWN0aWNlID0gdHRrLkZyYW1lKHNlbGYucHJhY3RpY2VGcmFtZSkNCgkJc2VsZi5ib2R5X3ByYWN0aWNlID0gdHRrLkZyYW1lKHNlbGYucHJhY3RpY2VGcmFtZSkNCgkJc2VsZi5mb290X3ByYWN0aWNlID0gdHRrLkZyYW1lKHNlbGYucHJhY3RpY2VGcmFtZSkNCgkJc2VsZi5sb2dvX3ByYWN0aWNlID0gdHRrLkxhYmVsKHNlbGYuaGVhZF9wcmFjdGljZSkNCgkJc2VsZi50aXRsZV9wcmFjdGljZSA9IHR0ay5MYWJlbChzZWxmLmhlYWRfcHJhY3RpY2UpDQoJCXNlbGYuc3VidGl0bGVfcHJhY3RpY2UgPSB0dGsuTGFiZWwoc2VsZi5oZWFkX3ByYWN0aWNlKQ0KCQlzZWxmLnN1YnNlY3Rpb25fcHJhY3RpY2UgPSB0dGsuTGFiZWwoc2VsZi5oZWFkX3ByYWN0aWNlKQ0KDQoJCXNlbGYua3VGcmFtZSA9IExhYmVsRnJhbWUoc2VsZi5ib2R5X3ByYWN0aWNlLHRleHQ9Iktub3dsZWRnZSBhbmQgVW5kZXJzdGFuZGluZyIpDQoJCXNlbGYudGlGcmFtZSA9IExhYmVsRnJhbWUoc2VsZi5ib2R5X3ByYWN0aWNlLHRleHQ9IlRoaW5raW5nIGFuZCBJbnF1aXJ5IikNCgkJc2VsZi5hRnJhbWUgPSBMYWJlbEZyYW1lKHNlbGYuYm9keV9wcmFjdGljZSx0ZXh0PSJBcHBsaWNhdGlvbiBhbmQgQ29tbXVuaWNhdGlvbiIpDQoJCXNlbGYua3VUZXh0ID0gVGV4dChzZWxmLmt1RnJhbWUpDQoJCXNlbGYudGlUZXh0ID0gVGV4dChzZWxmLnRpRnJhbWUpDQoJCXNlbGYuYVRleHQgPSAgVGV4dChzZWxmLmFGcmFtZSkNCg0KCQlzZWxmLmJhY2tUT0NfcHJhY3RpY2U9IEJ1dHRvbihzZWxmLmZvb3RfcHJhY3RpY2UpDQoJCXNlbGYucHJldlBhZ2VfcHJhY3RpY2UgPSBCdXR0b24oc2VsZi5mb290X3ByYWN0aWNlKQ0KCQlzZWxmLm5leHRQYWdlX3ByYWN0aWNlPSBCdXR0b24oc2VsZi5mb290X3ByYWN0aWNlKQ0KDQoJCSMjIHNldHVwIHdpZGdldHMgDQoJCXNlbGYucHJhY3RpY2VGcmFtZS5yb3djb25maWd1cmUoMCx3ZWlnaHQ9MCkNCgkJc2VsZi5wcmFjdGljZUZyYW1lLnJvd2NvbmZpZ3VyZSgxLHdlaWdodD0xKQ0KCQlzZWxmLnByYWN0aWNlRnJhbWUucm93Y29uZmlndXJlKDIsd2VpZ2h0PTApDQoJCXNlbGYucHJhY3RpY2VGcmFtZS5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX3ByYWN0aWNlLmdyaWQocm93PTAsY29sdW1uPTAsc3RpY2s9J253c2UnKQ0KCQlzZWxmLmJvZHlfcHJhY3RpY2UuZ3JpZChyb3c9MSxjb2x1bW49MCxzdGljaz0nbndzZScpDQoJCXNlbGYuZm9vdF9wcmFjdGljZS5ncmlkKHJvdz0yLGNvbHVtbj0wLHN0aWNrPSdud3NlJykNCg0KCQlzZWxmLmhlYWRfcHJhY3RpY2Uucm93Y29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF9wcmFjdGljZS5yb3djb25maWd1cmUoMSx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX3ByYWN0aWNlLnJvd2NvbmZpZ3VyZSgyLHdlaWdodD0xKQ0KCQlzZWxmLmhlYWRfcHJhY3RpY2UuY29sdW1uY29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF9wcmFjdGljZS5jb2x1bW5jb25maWd1cmUoMSx3ZWlnaHQ9MSkNCg0KCQ0KCQlzZWxmLmJvZHlfcHJhY3RpY2Uucm93Y29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuYm9keV9wcmFjdGljZS5yb3djb25maWd1cmUoMSx3ZWlnaHQ9MSkNCgkJc2VsZi5ib2R5X3ByYWN0aWNlLnJvd2NvbmZpZ3VyZSgyLHdlaWdodD0xKQ0KCQlzZWxmLmJvZHlfcHJhY3RpY2UuY29sdW1uY29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCQ0KCQlzZWxmLmZvb3RfcHJhY3RpY2Uucm93Y29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuZm9vdF9wcmFjdGljZS5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5mb290X3ByYWN0aWNlLmNvbHVtbmNvbmZpZ3VyZSgxLHdlaWdodD0xKQ0KCQlzZWxmLmZvb3RfcHJhY3RpY2UuY29sdW1uY29uZmlndXJlKDIsd2VpZ2h0PTEpDQoNCgkJIyBoZWFkDQoJCXNlbGYuaGVhZF9wcmFjdGljZS5jb25maWcocmVsaWVmPSdyaWRnZScpDQoJCXNlbGYuaGVhZF9wcmFjdGljZS5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MCkNCgkJc2VsZi5sb2dvX3ByYWN0aWNlLmdyaWQocm93PTAsY29sdW1uPTAscm93c3Bhbj0zLHN0aWNrPSduc3cnKQ0KCQlzZWxmLnRpdGxlX3ByYWN0aWNlLmdyaWQocm93PTAsY29sdW1uPTEsc3RpY2s9J253c2UnKQ0KCQlzZWxmLnN1YnRpdGxlX3ByYWN0aWNlLmdyaWQocm93PTEsY29sdW1uPTEsc3RpY2s9J253c2UnKQ0KCQlzZWxmLnN1YnNlY3Rpb25fcHJhY3RpY2UuZ3JpZChyb3c9Mixjb2x1bW49MSxzdGljaz0nbndzZScpDQoJCXNlbGYubG9nb19wcmFjdGljZS5jb25maWcoaW1hZ2U9c2VsZi5sb2dvX3NtYWxsLGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KCQlzZWxmLnRpdGxlX3ByYWN0aWNlLmNvbmZpZyhmb250PXNlbGYudGl0bGVGb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KCQlzZWxmLnN1YnRpdGxlX3ByYWN0aWNlLmNvbmZpZyhmb250PXNlbGYuc3VidGl0bGVGb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KCQlzZWxmLnN1YnNlY3Rpb25fcHJhY3RpY2UuY29uZmlnKGZvbnQ9c2VsZi5zdWJzZWN0aW9uRm9udCxiYWNrZ3JvdW5kPXNlbGYuaGVhZGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuaGVhZGVyZmdjb2xvcikNCg0KCQkjIGJvZHkgDQoJCXNlbGYua3VGcmFtZS5ncmlkKHJvdz0wLGNvbHVtbj0wLHN0aWNrPSdud3NlJykNCgkJc2VsZi50aUZyYW1lLmdyaWQocm93PTEsY29sdW1uPTAsc3RpY2s9J253c2UnKQ0KCQlzZWxmLmFGcmFtZS5ncmlkKHJvdz0yLGNvbHVtbj0wLHN0aWNrPSdud3NlJykNCgkJc2VsZi5rdUZyYW1lLmNvbmZpZyhiYWNrZ3JvdW5kPXNlbGYua3ViZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5rdWZnY29sb3IpDQoJCXNlbGYudGlGcmFtZS5jb25maWcoYmFja2dyb3VuZD1zZWxmLnRpYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYudGlmZ2NvbG9yKQ0KCQlzZWxmLmFGcmFtZS5jb25maWcoYmFja2dyb3VuZD1zZWxmLmFiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5hZmdjb2xvcikNCgkJc2VsZi5rdVRleHQucGFjayhleHBhbmQ9VHJ1ZSxmaWxsPSd5JykNCgkJc2VsZi50aVRleHQucGFjayhleHBhbmQ9VHJ1ZSxmaWxsPSd5JykNCgkJc2VsZi5hVGV4dC5wYWNrKGV4cGFuZD1UcnVlLGZpbGw9J3knKQ0KCQl3aWQgPSAxMDANCgkJIyB3cmFwTGVuID02ODANCgkJc2VsZi5rdVRleHQuY29uZmlnKHdyYXA9J3dvcmQnLHdpZHRoPXdpZCkNCgkJc2VsZi50aVRleHQuY29uZmlnKHdyYXA9J3dvcmQnLHdpZHRoPXdpZCkNCgkJc2VsZi5hVGV4dC5jb25maWcod3JhcD0nd29yZCcsd2lkdGg9d2lkKQ0KCQlzZWxmLmt1RnJhbWUuY29uZmlnKGxhYmVsYW5jaG9yPSduJyxmb250PXNlbGYua3VMYWJlbEZvbnQpDQoJCXNlbGYudGlGcmFtZS5jb25maWcobGFiZWxhbmNob3I9J24nLGZvbnQ9c2VsZi50aUxhYmVsRm9udCkNCgkJc2VsZi5hRnJhbWUuY29uZmlnKGxhYmVsYW5jaG9yPSduJyxmb250PXNlbGYuYUxhYmVsRm9udCkNCgkJIyBmb290DQoJCXNlbGYuYmFja1RPQ19wcmFjdGljZS5ncmlkKHJvdz0wLGNvbHVtbj0wLHN0aWNrPSduc3dlJykNCgkJc2VsZi5wcmV2UGFnZV9wcmFjdGljZS5ncmlkKHJvdz0wLGNvbHVtbj0xLHN0aWNrPSduc3dlJykNCgkJc2VsZi5uZXh0UGFnZV9wcmFjdGljZS5ncmlkKHJvdz0wLGNvbHVtbj0yLHN0aWNrPSduc3dlJykNCgkJc2VsZi5iYWNrVE9DX3ByYWN0aWNlLmNvbmZpZyh0ZXh0PSJSZXR1cm4gdG8gVC5PLkMuIChyKSIsZm9udD1zZWxmLmZvb3RGb250LGJhY2tncm91bmQ9c2VsZi5mb290ZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5mb290ZXJmZ2NvbG9yLHJlbGllZj1zZWxmLmJ1dHRvblJlbGllZikNCgkJc2VsZi5wcmV2UGFnZV9wcmFjdGljZS5jb25maWcodGV4dD0iUHJldmlvdXMgUGFnZSAocCkiLGZvbnQ9c2VsZi5mb290Rm9udCxiYWNrZ3JvdW5kPXNlbGYuZm9vdGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuZm9vdGVyZmdjb2xvcixyZWxpZWY9c2VsZi5idXR0b25SZWxpZWYpDQoJCXNlbGYubmV4dFBhZ2VfcHJhY3RpY2UuY29uZmlnKHRleHQ9Ik5leHQgUGFnZSAobikiLGZvbnQ9c2VsZi5mb290Rm9udCxiYWNrZ3JvdW5kPXNlbGYuZm9vdGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuZm9vdGVyZmdjb2xvcixyZWxpZWY9c2VsZi5idXR0b25SZWxpZWYpDQoJCXNlbGYuYmFja1RPQ19wcmFjdGljZS5jb25maWcoY29tbWFuZD1zZWxmLmJhY2tUT0NfcHJhY3RpY2VfY2FsbGJhY2spDQoJCSMgY2FsbGJhY2tzDQoJCXNlbGYubmV4dFBhZ2VfcHJhY3RpY2UuY29uZmlnKGNvbW1hbmQ9c2VsZi5uZXh0UGFnZV9wcmFjdGljZV9jYWxsYmFjaykNCgkJc2VsZi5wcmV2UGFnZV9wcmFjdGljZS5jb25maWcoY29tbWFuZD1zZWxmLnByZXZQYWdlX3ByYWN0aWNlX2NhbGxiYWNrKQ0KDQoNCglkZWYgcHJldlBhZ2VfcHJhY3RpY2VfY2FsbGJhY2soc2VsZik6DQoJCUlEID0gc2VsZi5sb2FkSUQNCgkJaW5kID0gc2VsZi5wYWdlSUQuaW5kZXgoSUQpDQoJCXNlbGYucHJhY3RpY2VGcmFtZS5mb3JnZXQoKQ0KCQlpZiBpbmQ9PTA6DQoJCQlzZWxmLnRvY0ZyYW1lLnBhY2soZXhwYW5kPVRydWUsZmlsbD1CT1RIKQ0KCQkJc2VsZi5wcmVwYXJlVE9DKCkNCgkJZWxzZToNCgkJCXNlbGYubG9hZElEID0gc2VsZi5wYWdlSURbaW5kLTFdDQoJCQlzZWxmLmxvYWRQYWdlX2NhbGxiYWNrKCkNCg0KCWRlZiBuZXh0UGFnZV9wcmFjdGljZV9jYWxsYmFjayhzZWxmKToNCgkJSUQgPSBzZWxmLmxvYWRJRA0KCQlpbmQgPSBzZWxmLnBhZ2VJRC5pbmRleChJRCkNCgkJbmV4dElEID0gc2VsZi5wYWdlSURbaW5kKzFdDQoJCXNlbGYubG9hZElEID0gbmV4dElEDQoJCXNlbGYucHJhY3RpY2VGcmFtZS5mb3JnZXQoKQ0KCQlzZWxmLmxvYWRQYWdlX2NhbGxiYWNrKCkNCg0KCWRlZiBsb2FkUHJhY3RpY2Uoc2VsZik6DQoJCUlEID0gc2VsZi5sb2FkSUQNCgkJZGF0YSA9IHNlbGYucHJhY3RpY2VEYXRhW0lEXQ0KCQlzZWxmLmt1VGV4dC5jb25maWcoc3RhdGU9J25vcm1hbCcpDQoJCXNlbGYudGlUZXh0LmNvbmZpZyhzdGF0ZT0nbm9ybWFsJykNCgkJc2VsZi5hVGV4dC5jb25maWcoc3RhdGU9J25vcm1hbCcpDQoJCXNlbGYucHJhY3RpY2VGcmFtZS5wYWNrKGV4cGFuZD1UcnVlLGZpbGwgPSBCT1RIKQ0KCQlzZWxmLnRpdGxlX3ByYWN0aWNlLmNvbmZpZyh0ZXh0ID0gZGF0YVsnY2hhcHRlciddKQ0KCQlzZWxmLnN1YnRpdGxlX3ByYWN0aWNlLmNvbmZpZyh0ZXh0PWRhdGFbJ3NlY3Rpb24nXSkNCgkJc2VsZi5zdWJzZWN0aW9uX3ByYWN0aWNlLmNvbmZpZyh0ZXh0PWRhdGFbJ3N1YnNlY3Rpb24nXSkNCgkJIyBrdQ0KCQlzZWxmLmt1VGV4dC5kZWxldGUoJzEuMCcsJ2VuZCcpDQoJCXNlbGYua3VUZXh0Lmluc2VydCgnMS4wJyxzZWxmLnByYWN0aWNlRGF0YVtJRF1bJ0tVJ10pDQoJCXNlbGYua3VUZXh0LnRhZ19hZGQoJ2t1dGFnJywnMS4wJywnZW5kJykNCgkJc2VsZi5rdVRleHQudGFnX2NvbmZpZ3VyZSgna3V0YWcnLGZvbnQ9c2VsZi5rdUZvbnQpDQoJCXNlbGYua3VUZXh0LmNvbmZpZyhoZWlnaHQ9c2VsZi5wcmFjdGljZURhdGFbSURdWydrdUhlaWdodCddKQ0KCQkjIHRpDQoJCXNlbGYudGlUZXh0LmRlbGV0ZSgnMS4wJywnZW5kJykNCgkJc2VsZi50aVRleHQuaW5zZXJ0KCcxLjAnLHNlbGYucHJhY3RpY2VEYXRhW0lEXVsnVEknXSkNCgkJc2VsZi50aVRleHQudGFnX2FkZCgndGl0YWcnLCcxLjAnLCdlbmQnKQ0KCQlzZWxmLnRpVGV4dC50YWdfY29uZmlndXJlKCd0aXRhZycsZm9udD1zZWxmLnRpRm9udCkNCgkJc2VsZi50aVRleHQuY29uZmlnKGhlaWdodD1zZWxmLnByYWN0aWNlRGF0YVtJRF1bJ3RpSGVpZ2h0J10pDQoJCSMgYSANCgkJc2VsZi5hVGV4dC5kZWxldGUoJzEuMCcsJ2VuZCcpDQoJCXNlbGYuYVRleHQuaW5zZXJ0KCcxLjAnLHNlbGYucHJhY3RpY2VEYXRhW0lEXVsnQSddKQ0KCQlzZWxmLmFUZXh0LnRhZ19hZGQoJ2F0YWcnLCcxLjAnLCdlbmQnKQ0KCQlzZWxmLmFUZXh0LnRhZ19jb25maWd1cmUoJ2F0YWcnLGZvbnQ9c2VsZi5hRm9udCkNCgkJc2VsZi5hVGV4dC5jb25maWcoaGVpZ2h0PXNlbGYucHJhY3RpY2VEYXRhW0lEXVsnYUhlaWdodCddKQ0KCQkjIyBkaXNhYmxlIHdpZGdldHMNCgkJc2VsZi5rdVRleHQuY29uZmlnKHN0YXRlPSdkaXNhYmxlZCcpDQoJCXNlbGYudGlUZXh0LmNvbmZpZyhzdGF0ZT0nZGlzYWJsZWQnKQ0KCQlzZWxmLmFUZXh0LmNvbmZpZyhzdGF0ZT0nZGlzYWJsZWQnKQ0KCQlzZWxmLndoaWNoRnJhbWUgPSAncHJhY3RpY2UnDQoJCXJldHVybg0KDQoJZGVmIGJhY2tUT0NfcHJhY3RpY2VfY2FsbGJhY2soc2VsZik6DQoJCXNlbGYucHJhY3RpY2VGcmFtZS5mb3JnZXQoKQ0KCQlzZWxmLnRvY0ZyYW1lLnBhY2soZXhwYW5kPVRydWUsZmlsbD1CT1RIKQ0KCQlzZWxmLnByZXBhcmVUT0MoKQ0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIFBST0pFQ1QgRlJBTUUgTUVUSE9EUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KCWRlZiBjcmVhdGVQUk9KRUNUKHNlbGYpOg0KCQkjIyBjcmVhdGUgd2lkZ2V0cyAjIw0KCQlzZWxmLnByb2plY3RGcmFtZSA9IHR0ay5GcmFtZShzZWxmLnJvb3QpDQoJCXNlbGYuaGVhZF9wcm9qZWN0ID0gdHRrLkZyYW1lKHNlbGYucHJvamVjdEZyYW1lKQ0KCQlzZWxmLmJvZHlfcHJvamVjdCA9IHR0ay5GcmFtZShzZWxmLnByb2plY3RGcmFtZSkNCgkJc2VsZi5mb290X3Byb2plY3QgPSB0dGsuRnJhbWUoc2VsZi5wcm9qZWN0RnJhbWUpDQoJCXNlbGYubG9nb19wcm9qZWN0ID0gdHRrLkxhYmVsKHNlbGYuaGVhZF9wcm9qZWN0KQ0KCQlzZWxmLnRpdGxlX3Byb2plY3QgPSB0dGsuTGFiZWwoc2VsZi5oZWFkX3Byb2plY3QpDQoJCXNlbGYuc3VidGl0bGVfcHJvamVjdCA9IHR0ay5MYWJlbChzZWxmLmhlYWRfcHJvamVjdCkNCgkJc2VsZi5zdWJzZWN0aW9uX3Byb2plY3QgPSB0dGsuTGFiZWwoc2VsZi5oZWFkX3Byb2plY3QpDQoNCgkJc2VsZi5wcm9qZWN0VGV4dCA9IHR0ay4gTGFiZWwoc2VsZi5ib2R5X3Byb2plY3QpDQoNCgkJc2VsZi5iYWNrVE9DX3Byb2plY3Q9IEJ1dHRvbihzZWxmLmZvb3RfcHJvamVjdCkNCgkJc2VsZi5wcmV2UGFnZV9wcm9qZWN0ID0gQnV0dG9uKHNlbGYuZm9vdF9wcm9qZWN0KQ0KCQlzZWxmLm5leHRQYWdlX3Byb2plY3Q9IEJ1dHRvbihzZWxmLmZvb3RfcHJvamVjdCkNCg0KCQkjIyBzZXR1cCB3aWRnZXRzIA0KCQlzZWxmLnByb2plY3RGcmFtZS5yb3djb25maWd1cmUoMCx3ZWlnaHQ9MCkNCgkJc2VsZi5wcm9qZWN0RnJhbWUucm93Y29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYucHJvamVjdEZyYW1lLnJvd2NvbmZpZ3VyZSgyLHdlaWdodD0wKQ0KCQlzZWxmLnByb2plY3RGcmFtZS5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX3Byb2plY3QuZ3JpZChyb3c9MCxjb2x1bW49MCxzdGljaz0nbndzZScpDQoJCXNlbGYuYm9keV9wcm9qZWN0LmdyaWQocm93PTEsY29sdW1uPTAsc3RpY2s9J253c2UnKQ0KCQlzZWxmLmZvb3RfcHJvamVjdC5ncmlkKHJvdz0yLGNvbHVtbj0wLHN0aWNrPSdud3NlJykNCg0KCQlzZWxmLmhlYWRfcHJvamVjdC5yb3djb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX3Byb2plY3Qucm93Y29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF9wcm9qZWN0LnJvd2NvbmZpZ3VyZSgyLHdlaWdodD0xKQ0KCQlzZWxmLmhlYWRfcHJvamVjdC5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MCkNCgkJc2VsZi5oZWFkX3Byb2plY3QuY29sdW1uY29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJDQoJCXNlbGYuYm9keV9wcm9qZWN0LnJvd2NvbmZpZ3VyZSgwLHdlaWdodD0xKQ0KCQlzZWxmLmJvZHlfcHJvamVjdC5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJDQoJCXNlbGYuZm9vdF9wcm9qZWN0LnJvd2NvbmZpZ3VyZSgwLHdlaWdodD0xKQ0KCQlzZWxmLmZvb3RfcHJvamVjdC5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5mb290X3Byb2plY3QuY29sdW1uY29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYuZm9vdF9wcm9qZWN0LmNvbHVtbmNvbmZpZ3VyZSgyLHdlaWdodD0xKQ0KDQoJCSMgaGVhZA0KCQlzZWxmLmhlYWRfcHJvamVjdC5jb25maWcocmVsaWVmPSdyaWRnZScpDQoJCXNlbGYubG9nb19wcm9qZWN0LmdyaWQocm93PTAsY29sdW1uPTAscm93c3Bhbj0zLHN0aWNrPSdud3MnKQ0KCQlzZWxmLnRpdGxlX3Byb2plY3QuZ3JpZChyb3c9MCxjb2x1bW49MSxzdGljaz0nbndzZScpDQoJCXNlbGYuc3VidGl0bGVfcHJvamVjdC5ncmlkKHJvdz0xLGNvbHVtbj0xLHN0aWNrPSdud3NlJykNCgkJc2VsZi5zdWJzZWN0aW9uX3Byb2plY3QuZ3JpZChyb3c9Mixjb2x1bW49MSxzdGljaz0nbndzZScpDQoJCXNlbGYubG9nb19wcm9qZWN0LmNvbmZpZyhpbWFnZT1zZWxmLmxvZ29fc21hbGwsYmFja2dyb3VuZD1zZWxmLmhlYWRlcmJnY29sb3IpDQoJCXNlbGYudGl0bGVfcHJvamVjdC5jb25maWcoZm9udD1zZWxmLnRpdGxlRm9udCxiYWNrZ3JvdW5kPXNlbGYuaGVhZGVyYmdjb2xvcixmb3JlZ3JvdW5kPXNlbGYuaGVhZGVyZmdjb2xvcikNCgkJc2VsZi5zdWJ0aXRsZV9wcm9qZWN0LmNvbmZpZyhmb250PXNlbGYuc3VidGl0bGVGb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KCQlzZWxmLnN1YnNlY3Rpb25fcHJvamVjdC5jb25maWcoZm9udD1zZWxmLnN1YnNlY3Rpb25Gb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5oZWFkZXJmZ2NvbG9yKQ0KDQoJCSMgYm9keSANCgkJc2VsZi5wcm9qZWN0VGV4dC5ncmlkKHJvdz0wLGNvbHVtbj0wKQ0KCQlzZWxmLnByb2plY3RUZXh0LmNvbmZpZyh3aWR0aD02MCx3cmFwbGVuZ3RoPTcwMCxmb250PXNlbGYucHJvamVjdEZvbnQpDQoJCSMgZm9vdA0KCQlzZWxmLmJhY2tUT0NfcHJvamVjdC5ncmlkKHJvdz0wLGNvbHVtbj0wLHN0aWNrPSduc3dlJykNCgkJc2VsZi5wcmV2UGFnZV9wcm9qZWN0LmdyaWQocm93PTAsY29sdW1uPTEsc3RpY2s9J25zd2UnKQ0KCQlzZWxmLm5leHRQYWdlX3Byb2plY3QuZ3JpZChyb3c9MCxjb2x1bW49MixzdGljaz0nbnN3ZScpDQoJCXNlbGYuYmFja1RPQ19wcm9qZWN0LmNvbmZpZyh0ZXh0PSJSZXR1cm4gdG8gVC5PLkMuIChyKSIsZm9udD1zZWxmLmZvb3RGb250LGJhY2tncm91bmQ9c2VsZi5mb290ZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5mb290ZXJmZ2NvbG9yLHJlbGllZj1zZWxmLmJ1dHRvblJlbGllZikNCgkJc2VsZi5wcmV2UGFnZV9wcm9qZWN0LmNvbmZpZyh0ZXh0PSJQcmV2aW91cyBQYWdlIChwKSIsZm9udD1zZWxmLmZvb3RGb250LGJhY2tncm91bmQ9c2VsZi5mb290ZXJiZ2NvbG9yLGZvcmVncm91bmQ9c2VsZi5mb290ZXJmZ2NvbG9yLHJlbGllZj1zZWxmLmJ1dHRvblJlbGllZikNCgkJc2VsZi5uZXh0UGFnZV9wcm9qZWN0LmNvbmZpZyh0ZXh0PSJOZXh0IFBhZ2UgKG4pIixmb250PXNlbGYuZm9vdEZvbnQsYmFja2dyb3VuZD1zZWxmLmZvb3RlcmJnY29sb3IsZm9yZWdyb3VuZD1zZWxmLmZvb3RlcmZnY29sb3IscmVsaWVmPXNlbGYuYnV0dG9uUmVsaWVmKQ0KCQlzZWxmLmJhY2tUT0NfcHJvamVjdC5jb25maWcoY29tbWFuZD1zZWxmLmJhY2tUT0NfcHJvamVjdF9jYWxsYmFjaykNCgkJIyBjYWxsYmFja3MNCgkJc2VsZi5uZXh0UGFnZV9wcm9qZWN0LmNvbmZpZyhjb21tYW5kPXNlbGYubmV4dFBhZ2VfcHJvamVjdF9jYWxsYmFjaykNCgkJc2VsZi5wcmV2UGFnZV9wcm9qZWN0LmNvbmZpZyhjb21tYW5kPXNlbGYucHJldlBhZ2VfcHJvamVjdF9jYWxsYmFjaykNCg0KDQoJZGVmIHByZXZQYWdlX3Byb2plY3RfY2FsbGJhY2soc2VsZik6DQoJCUlEID0gc2VsZi5sb2FkSUQNCgkJaW5kID0gc2VsZi5wYWdlSUQuaW5kZXgoSUQpDQoJCXNlbGYucHJvamVjdEZyYW1lLmZvcmdldCgpDQoJCWlmIGluZD09MDoNCgkJCXNlbGYudG9jRnJhbWUucGFjayhleHBhbmQ9VHJ1ZSxmaWxsPUJPVEgpDQoJCQlzZWxmLnByZXBhcmVUT0MoKQ0KCQllbHNlOg0KCQkJc2VsZi5sb2FkSUQgPSBzZWxmLnBhZ2VJRFtpbmQtMV0NCgkJCXNlbGYubG9hZFBhZ2VfY2FsbGJhY2soKQ0KDQoJZGVmIG5leHRQYWdlX3Byb2plY3RfY2FsbGJhY2soc2VsZik6DQoJCUlEID0gc2VsZi5sb2FkSUQNCgkJaW5kID0gc2VsZi5wYWdlSUQuaW5kZXgoSUQpDQoJCW5leHRJRCA9IHNlbGYucGFnZUlEW2luZCsxXQ0KCQlzZWxmLmxvYWRJRCA9IG5leHRJRA0KCQlzZWxmLnByb2plY3RGcmFtZS5mb3JnZXQoKQ0KCQlzZWxmLmxvYWRQYWdlX2NhbGxiYWNrKCkNCg0KCWRlZiBsb2FkUHJvamVjdChzZWxmKToNCgkJSUQgPSBzZWxmLmxvYWRJRA0KCQlkYXRhID0gc2VsZi5wcm9qZWN0RGF0YVtJRF0NCgkJc2VsZi5wcm9qZWN0RnJhbWUucGFjayhleHBhbmQ9VHJ1ZSxmaWxsID0gQk9USCkNCgkJc2VsZi50aXRsZV9wcm9qZWN0LmNvbmZpZyh0ZXh0ID0gZGF0YVsnY2hhcHRlciddKQ0KCQlzZWxmLnN1YnRpdGxlX3Byb2plY3QuY29uZmlnKHRleHQ9ZGF0YVsnc2VjdGlvbiddKQ0KCQlzZWxmLnN1YnNlY3Rpb25fcHJvamVjdC5jb25maWcodGV4dD1kYXRhWydzdWJzZWN0aW9uJ10pDQoJCXNlbGYucHJvamVjdFRleHQuY29uZmlnKHRleHQ9c2VsZi5wcm9qZWN0RGF0YVtJRF1bJ3RleHQnXSkNCgkJc2VsZi53aGljaEZyYW1lID0gJ3Byb2plY3QnDQoJCXJldHVybg0KDQoJZGVmIGJhY2tUT0NfcHJvamVjdF9jYWxsYmFjayhzZWxmKToNCgkJc2VsZi5wcm9qZWN0RnJhbWUuZm9yZ2V0KCkNCgkJc2VsZi50b2NGcmFtZS5wYWNrKGV4cGFuZD1UcnVlLGZpbGw9Qk9USCkNCgkJc2VsZi5wcmVwYXJlVE9DKCkNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyBUT0MgRlJBTUUgTUVUSE9EUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCglkZWYgY3JlYXRlVE9DKHNlbGYpOg0KCQkjIyBjcmVhdGUgd2lkZ2V0cyAjIw0KCQlzZWxmLnRvY0ZyYW1lID0gdHRrLkZyYW1lKHNlbGYucm9vdCkNCgkJc2VsZi5oZWFkX3RvYyA9IHR0ay5GcmFtZShzZWxmLnRvY0ZyYW1lKQ0KCQlzZWxmLmJvZHlfdG9jID0gdHRrLkZyYW1lKHNlbGYudG9jRnJhbWUpDQoJCXNlbGYuZm9vdF90b2MgPSB0dGsuRnJhbWUoc2VsZi50b2NGcmFtZSkNCgkJc2VsZi5sb2dvX3RvYyA9IHR0ay5MYWJlbChzZWxmLmhlYWRfdG9jKQ0KCQlzZWxmLnRpdGxlX3RvYyA9IHR0ay5MYWJlbChzZWxmLmhlYWRfdG9jKQ0KCQlzZWxmLnRvY19sRnJhbWUgPSBMYWJlbEZyYW1lKHNlbGYuYm9keV90b2MsdGV4dD0iVGFibGUgb2YgQ29udGVudHMiKQ0KCQlzZWxmLnRvY0xFRlQgPSB0dGsuVHJlZXZpZXcoc2VsZi50b2NfbEZyYW1lKQ0KCQlzZWxmLnRvY1JJR0hUID0gdHRrLlRyZWV2aWV3KHNlbGYudG9jX2xGcmFtZSkNCgkJc2VsZi5sb2FkUGFnZSA9IEJ1dHRvbihzZWxmLmZvb3RfdG9jKQ0KCQkjIyBzZXR1cCB3aWRnZXRzICMjDQoJCXNlbGYudG9jRnJhbWUucm93Y29uZmlndXJlKDAsd2VpZ2h0PTApDQoJCXNlbGYudG9jRnJhbWUucm93Y29uZmlndXJlKDEsd2VpZ2h0PTEpDQoJCXNlbGYudG9jRnJhbWUucm93Y29uZmlndXJlKDIsd2VpZ2h0PTApDQoJCXNlbGYudG9jRnJhbWUuY29sdW1uY29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuaGVhZF90b2MuZ3JpZChyb3c9MCxjb2x1bW49MCxzdGljaz0nbnN3ZScpDQoJCXNlbGYuYm9keV90b2MuZ3JpZChyb3c9MSxjb2x1bW49MCxzdGljaz0nbnN3ZScpDQoJCXNlbGYuZm9vdF90b2MuZ3JpZChyb3c9Mixjb2x1bW49MCxzdGljaz0nbnN3ZScpDQoJCXNlbGYudG9jX2xGcmFtZS5wYWNrKGV4cGFuZD1UcnVlLGZpbGw9Qk9USCkNCgkJc2VsZi5oZWFkX3RvYy5jb25maWcocmVsaWVmPSdyaWRnZScpDQoJCXNlbGYuZm9vdF90b2MuY29uZmlnKHJlbGllZj0ncmlkZ2UnKQ0KCQlzZWxmLnRvY19sRnJhbWUuY29uZmlnKGxhYmVsYW5jaG9yPSduJyxmb250PXNlbGYuYnV0dG9uRm9udCxyZWxpZWY9J3NvbGlkJykNCgkJIyBoZWFkICMNCgkJc2VsZi5oZWFkX3RvYy5yb3djb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX3RvYy5yb3djb25maWd1cmUoMSx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX3RvYy5jb2x1bW5jb25maWd1cmUoMCx3ZWlnaHQ9MSkNCgkJc2VsZi5oZWFkX3RvYy5jb2x1bW5jb25maWd1cmUoMSx3ZWlnaHQ9MSkNCgkJc2VsZi5sb2dvX3RvYy5jb25maWcoaW1hZ2U9c2VsZi5sb2dvLGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yKQ0KCQlzZWxmLmxvZ29fdG9jLmdyaWQocm93PTAsY29sdW1uPTAscm93c3Bhbj0yLHN0aWNrPSduc3dlJykNCgkJc2VsZi50aXRsZV90b2MuY29uZmlnKHRleHQ9IlB5dGhvbiBQcm9ncmFtbWluZ1xuVGhlIEJhc2ljcyIsZm9yZWdyb3VuZD1zZWxmLmhlYWRlcmZnY29sb3IpDQoJCXNlbGYudGl0bGVfdG9jLmdyaWQocm93PTAsY29sdW1uPTEsY29sdW1uc3Bhbj0xLHJvd3NwYW49MixzdGljaz0nbnN3ZScpDQoJCXNlbGYudGl0bGVfdG9jLmNvbmZpZyhmb250PXNlbGYudGl0bGVQYWdlRm9udCxiYWNrZ3JvdW5kPXNlbGYuaGVhZGVyYmdjb2xvcikNCgkJc2VsZi50aXRsZV90b2MuY29uZmlnKGZvbnQ9c2VsZi50aXRsZVBhZ2VGb250LGJhY2tncm91bmQ9c2VsZi5oZWFkZXJiZ2NvbG9yLGp1c3RpZnk9J2NlbnRlcicpDQoNCgkJIyBib2R5ICMNCgkJc2VsZi50b2NMRUZULmhlYWRpbmcoJyMwJyx0ZXh0PSdDSEFQVEVSUycpDQoJCXNlbGYudG9jTEVGVC5jb25maWcoc2hvdz0ndHJlZScpDQoJCXNlbGYudG9jUklHSFQuY29uZmlnKHNob3c9J3RyZWUnKQ0KCQl0cmVlV2lkID0gNDA1DQoJCXNlbGYudG9jTEVGVC5jb2x1bW4oJyMwJyx3aWR0aD10cmVlV2lkKQ0KCQlzZWxmLnRvY1JJR0hULmNvbHVtbignIzAnLHdpZHRoPXRyZWVXaWQpDQoJCXNlbGYudG9jTEVGVC5ncmlkKHJvdz0wLGNvbHVtbj0wLHN0aWNrPSduc3dlJykNCgkJc2VsZi50b2NSSUdIVC5ncmlkKHJvdz0wLGNvbHVtbj0xLHN0aWNrPSduc3dlJykNCg0KCQlucm93cyA9IDE3DQoJCXNlbGYudG9jTEVGVC5jb25maWcoaGVpZ2h0PW5yb3dzKQ0KCQlzZWxmLnRvY1JJR0hULmNvbmZpZyhoZWlnaHQ9bnJvd3MpDQoJCSMgZm9vdCAjDQoJCXNlbGYuZm9vdF90b2Mucm93Y29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYuZm9vdF90b2MuY29sdW1uY29uZmlndXJlKDAsd2VpZ2h0PTEpDQoJCXNlbGYubG9hZFBhZ2UuZ3JpZChyb3c9MCxjb2x1bW49MCxzdGljaz0nbnN3ZScpDQoJCXNlbGYubG9hZFBhZ2UuY29uZmlnKHJlbGllZj1zZWxmLmJ1dHRvblJlbGllZixmb250PXNlbGYuYnV0dG9uRm9udCxiYWNrZ3JvdW5kPXNlbGYuYnV0dG9uQ29sb3VyLGZvcmVncm91bmQ9J2JsYWNrJykNCgkJc2VsZi5sb2FkUGFnZS5jb25maWcoYmFja2dyb3VuZD1zZWxmLmZvb3RlcmJnY29sb3IsZm9yZWdyb3VuZD1zZWxmLmZvb3RlcmZnY29sb3IpDQoJCXNlbGYudG9jTEVGVC5jb25maWcoc2VsZWN0bW9kZT0nYnJvd3NlJykNCgkJc2VsZi50b2NSSUdIVC5jb25maWcoc2VsZWN0bW9kZT0nYnJvd3NlJykNCgkJc2VsZi5pbml0aWFsaXplVE9DKCkNCgkJDQoJCSMgYmluZCB2aXJ0dWFsIGV2ZW50cw0KCQlzZWxmLnRvY0xFRlQuYmluZCgnPDxUcmVldmlld1NlbGVjdD4+JyxzZWxmLnRvY0xFRlRfY2FsbGJhY2spDQoJCXNlbGYudG9jUklHSFQuYmluZCgnPDxUcmVldmlld1NlbGVjdD4+JyxzZWxmLnRvY1JJR0hUX2NhbGxiYWNrKQ0KCQlzZWxmLnRvY1JJR0hULmJpbmQoJzw8VHJlZXZpZXdPcGVuPj4nLHNlbGYuY2xvc2VUcmVlc19jYWxsYmFjaykNCgkJc2VsZi5sb2FkUGFnZS5jb25maWcoY29tbWFuZD1zZWxmLmxvYWRQYWdlX2NhbGxiYWNrKQ0KCQlzZWxmLnRvY1JJR0hULmJpbmQoJzxEb3VibGUtQnV0dG9uLTE+JyxzZWxmLm1vdXNlKQ0KCQlzZWxmLnRvY1JJR0hULmJpbmQoJzxSZXR1cm4+JyxzZWxmLmVudGVyUHJlc3NlZCkNCgkJc2VsZi50b2NSSUdIVC5mb2N1c19zZXQoKQ0KDQoJDQoJZGVmIHByZXBhcmVUT0Moc2VsZik6DQoJCXNlbGYuY2xvc2VUcmVlcygpDQoJCXBhcmVudCA9IHNlbGYudG9jUklHSFQucGFyZW50KHNlbGYubG9hZElEKQkNCgkJc2VsZi50b2NSSUdIVC5pdGVtKHBhcmVudCxvcGVuID0gVHJ1ZSkNCgkJc2VsZi50b2NSSUdIVC5zZWxlY3Rpb25fc2V0KHNlbGYubG9hZElEKQ0KCQlzZWxmLndoaWNoRnJhbWUgPSAndG9jJw0KDQoJZGVmIGxvYWRQYWdlX2NhbGxiYWNrKHNlbGYpOg0KCQlpbmQgPSAtMw0KCQlzZWxmLnRvY0ZyYW1lLmZvcmdldCgpDQoJCXNlbGYud3JpdGVMYXN0UGFnZShzZWxmLmxvYWRJRCkNCgkJaWYgc2VsZi5sb2FkSURbaW5kXT09J3AnOg0KCQkJc2VsZi5sb2FkTGVzc29uKCkNCgkJZWxpZiBzZWxmLmxvYWRJRFtpbmRdPT0nZSc6DQoJCQlzZWxmLmxvYWRFeGFtcGxlKCkNCgkJZWxpZiBzZWxmLmxvYWRJRFtpbmRdPT0naCc6DQoJCQlzZWxmLmxvYWRQcmFjdGljZSgpDQoJCWVsaWYgc2VsZi5sb2FkSURbaW5kXT09J20nOg0KCQkJc2VsZi5sb2FkUHJvamVjdCgpDQoJCWVsc2U6DQoJCQlwcmludCgiRVJST1IiKQ0KCQkJcHJpbnQoc2VsZi5sb2FkSUQpDQoJCXJldHVybg0KCQ0KCWRlZiBlbnRlclByZXNzZWQoc2VsZixldmVudCk6DQoJCUlEID0gc2VsZi50b2NSSUdIVC5zZWxlY3Rpb24oKVswXQ0KCQlpZiBsZW4oSUQpPT05Og0KCQkJc2VsZi5sb2FkSUQgPSBJRA0KCQkJc2VsZi5sb2FkUGFnZV9jYWxsYmFjaygpDQoNCglkZWYgbW91c2Uoc2VsZixldmVudCk6DQoJCUlEID0gc2VsZi50b2NSSUdIVC5zZWxlY3Rpb24oKVswXQ0KCQlpZiBsZW4oSUQpPT05Og0KCQkJc2VsZi5sb2FkSUQgPSBJRA0KCQkJc2VsZi5sb2FkUGFnZV9jYWxsYmFjaygpDQoNCglkZWYgaW5pdGlhbGl6ZVRPQyhzZWxmKToNCgkJIyBsb2FkIHRvYyBsZWZ0DQoJCWZvciBpIGluIHJhbmdlKGxlbihzZWxmLnRvY0RhdGFbMF0pKToNCgkJCXNlbGYudG9jTEVGVC5pbnNlcnQoJycsc3RyKGkpLCdjaGFwdGVyJytzdHIoaSsxKSx0ZXh0PXNlbGYudG9jRGF0YVswXVtpXSx0YWdzPSdjaGZvbnQnKQ0KCQlzZWxmLnRvY0xFRlQudGFnX2NvbmZpZ3VyZSgnY2hmb250Jyxmb250PSgnQ2FsaWJyaScsMTIsJ25vcm1hbCcpKQ0KCQkjIyBidWlsZCBpdGVtcyBhbmQgZGV0YWNoIHRoZW0gZnJvbSB0b2MgcmlnaHQgdHJlZSAjIw0KCQlzZWxmLnRvY19zZWN0aW9uSUQgPSBsaXN0KCkNCgkJZm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYudG9jRGF0YVsxXSkpOg0KCQkJc2VsZi50b2Nfc2VjdGlvbklELmFwcGVuZChsaXN0KCkpDQoJCQlzZWxmLmJ1aWxkU2VjdGlvblRyZWUoaSkNCgkJIyMgc2V0dXAgdHJlZXMgZm9yIG9wZW5pbmcgdXNlICMjDQoJCSMgZ2V0IGZpbGUgdGhhdCBjb250YWlucyBsYXN0IHBhZ2Ugdmlld2VkDQoJCWZpbGUgPSBvcGVuKHNlbGYucm9vdFBhdGgrJ2xhc3RQYWdlVmlld2VkLnR4dCcsJ3InKQ0KCQlsaW5lcyA9IGZpbGUucmVhZGxpbmVzKCkNCgkJZmlsZS5jbG9zZSgpDQoJCSMgZ2V0IGluZGljZXMNCgkJRlVMTF9JRCA9IGxpbmVzWzBdDQoJCWNJbmQgPSBGVUxMX0lELmZpbmQoJ2MnKSsxDQoJCXNJbmQgPSBGVUxMX0lELmZpbmQoJ3MnKSsxDQoJCWNfaW5kZXggPSBpbnQoRlVMTF9JRFtjSW5kOmNJbmQrMl0pLTENCgkJc19pbmRleCA9IGludChGVUxMX0lEW3NJbmQ6c0luZCsyXSktMQ0KCQlzZWxmLnJlYXR0YWNoX1RPQyhjX2luZGV4KQ0KCQlDSEFQX0lEID0gc2VsZi50b2NMRUZULmdldF9jaGlsZHJlbigpW2NfaW5kZXhdDQoJCVNFQ1RfSUQgPSBzZWxmLnRvY1JJR0hULmdldF9jaGlsZHJlbigpW3NfaW5kZXhdDQoJCXNlbGYudG9jTEVGVC5zZWxlY3Rpb25fc2V0KENIQVBfSUQpDQoJCXNlbGYudG9jUklHSFQuaXRlbShTRUNUX0lELG9wZW49VHJ1ZSkNCgkJc2VsZi50b2NSSUdIVC5zZWxlY3Rpb25fc2V0KEZVTExfSUQpDQoJCXNlbGYubG9hZFBhZ2VfdGV4dChGVUxMX0lEKQ0KCQlzdHJpbmc9c2VsZi50b2NMRUZULml0ZW0oc2VsZi50b2NMRUZULnNlbGVjdGlvbigpLCd0ZXh0JykNCgkJc2VsZi50b2NSSUdIVC5oZWFkaW5nKCcjMCcsdGV4dD1zdHJpbmcpDQoJCXJldHVybiANCg0KCWRlZiBsb2FkUGFnZV90ZXh0KHNlbGYsSUQpOg0KCQljSW5kID0gSUQuZmluZCgnYycpKzENCgkJc0luZCA9IElELmZpbmQoJ3MnKSsxDQoJCWlmICdwJyBpbiBJRDoNCgkJCWxhc3RJbmQgPSBJRC5maW5kKCdwJykrMQ0KCQkJc3VmZml4ID0gIkxlc3NvbiAiDQoJCWVsaWYgJ2UnIGluIElEOg0KCQkJbGFzdEluZCA9IElELmZpbmQoJ2UnKSsxDQoJCQlzdWZmaXggPSAiRXhhbXBsZSAiDQoJCWVsaWYgJ2gnIGluIElEOg0KCQkJbGFzdEluZCA9IElELmZpbmQoJ2gnKSsxDQoJCQlzdWZmaXggPSAiUmV2aWV3ICINCgkJZWxpZiAnbScgaW4gSUQ6DQoJCQlsYXN0SW5kID0gSUQuZmluZCgnbScpKzENCgkJCXN1ZmZpeCA9ICJQcm9qZWN0ICINCgkJZWxzZToNCgkJCWxhc3RJbmQgPSBGYWxzZQ0KCQkJc3VmZml4ID0gIkxlc3NvbiAiDQoJCWlmIGxhc3RJbmQ6DQoJCQlzdHJpbmcgPSAiTE9BRDogQ2hhcHRlciAiK0lEW2NJbmQ6Y0luZCsyXSsiLCBTZWN0aW9uICIrSURbc0luZDpzSW5kKzJdICsgIiwgIitzdWZmaXggKyBJRFtsYXN0SW5kOl0NCgkJZWxzZToNCgkJCXN0cmluZyA9ICJMT0FEOiBDaGFwdGVyICIrSURbY0luZDpjSW5kKzJdKyIsIFNlY3Rpb24gIitJRFtzSW5kOnNJbmQrMl0gKyAiLCAiK3N1ZmZpeCArICcwMScNCgkJc2VsZi5sb2FkUGFnZS5jb25maWcodGV4dD1zdHJpbmcpDQoJCXNlbGYubG9hZElEID0gSUQNCg0KCWRlZiByZWF0dGFjaF9UT0Moc2VsZixpbmRleCk6DQoJCWZvciBpIGluIHJhbmdlKGxlbihzZWxmLnRvY19zZWN0aW9uSURbaW5kZXhdKSk6DQoJCQlzZWxmLnRvY1JJR0hULm1vdmUoc2VsZi50b2Nfc2VjdGlvbklEW2luZGV4XVtpXSwnJyxpKQ0KCQlyZXR1cm4NCg0KDQoJZGVmIHRvY0xFRlRfY2FsbGJhY2soc2VsZixldmVudCk6DQoJCSMjIGRldGFjaCBjdXJyZW50IGNoaWxkcmVuIG9mIFRPQyBSSUdIVA0KCQljaGlsZHJlbiA9IHNlbGYudG9jUklHSFQuZ2V0X2NoaWxkcmVuKCkNCgkJZm9yIGkgaW4gcmFuZ2UobGVuKGNoaWxkcmVuKSk6DQoJCQlzZWxmLnRvY1JJR0hULmRldGFjaChjaGlsZHJlbltpXSkNCgkJSUQgPSBzZWxmLnRvY0xFRlQuc2VsZWN0aW9uKClbMF0NCgkJc3RyaW5nPXNlbGYudG9jTEVGVC5pdGVtKElELCd0ZXh0JykNCgkJc2VsZi50b2NSSUdIVC5oZWFkaW5nKCcjMCcsdGV4dD1zdHJpbmcpDQoJCWluZGV4ID0gc2VsZi50b2NMRUZULmluZGV4KElEKQ0KCQlzZWxmLnJlYXR0YWNoX1RPQyhpbmRleCkNCgkJckNoaWxkcmVuID0gc2VsZi50b2NSSUdIVC5nZXRfY2hpbGRyZW4oKQ0KCQlpZiBub3Qgc2VsZi5maXJzdENhbGw6DQoJCQlzZWxmLmNsb3NlVHJlZXMoKQ0KCQkJY2hpbGQgPSBzZWxmLnRvY1JJR0hULmdldF9jaGlsZHJlbihyQ2hpbGRyZW5bMF0pWzBdDQoJCQlzZWxmLmxvYWRJRCA9IGNoaWxkDQoJCQlzZWxmLnByZXBhcmVUT0MoKQ0KCQkJc2VsZi5sb2FkUGFnZV90ZXh0KGNoaWxkKQ0KCQllbHNlOg0KCQkJc2VsZi5maXJzdENhbGw9RmFsc2UNCgkJcmV0dXJuDQoNCglkZWYgdG9jUklHSFRfY2FsbGJhY2soc2VsZixldmVudCk6DQoJCUlEID0gc2VsZi50b2NSSUdIVC5zZWxlY3Rpb24oKVswXQ0KCQlpZiBsZW4oSUQpPT02Og0KCQkJSUQgPSBJRCsncDAxJw0KCQlzZWxmLmxvYWRQYWdlX3RleHQoSUQpDQoJCXJldHVybg0KDQoJZGVmIGJ1aWxkU2VjdGlvblRyZWUoc2VsZixpbmRleCk6DQoJCXNpbmQgPSAwDQoJCWZvciBqIGluIHJhbmdlKGxlbihzZWxmLnRvY0RhdGFbMV1baW5kZXhdKSk6DQoJCQlpZiAiU2VjdGlvbiIgaW4gc2VsZi50b2NEYXRhWzFdW2luZGV4XVtqXToNCgkJCQlzaW5kID0gc2luZCsxDQoJCQkJcGluZCA9IDANCgkJCQllaW5kID0gMA0KCQkJCWhpbmQgPSAwDQoJCQkJbWluZCA9IDANCgkJCQljdXJJRCA9ICJjezowMmR9c3s6MDJkfSIuZm9ybWF0KGluZGV4KzEsc2luZCkNCgkJCQlzZWxmLnRvY19zZWN0aW9uSURbaW5kZXhdLmFwcGVuZChjdXJJRCkNCgkJCQlzZWxmLnRvY1JJR0hULmluc2VydCgnJyxzdHIoaiksY3VySUQsdGV4dD1zZWxmLnRvY0RhdGFbMV1baW5kZXhdW2pdLHRhZ3M9J3NlY0ZvbnQnKQ0KCQkJCXNlbGYudG9jUklHSFQuZGV0YWNoKGN1cklEKQ0KCQkJZWxzZToNCgkJCQlpZiAiTGVzc29uIiBpbiBzZWxmLnRvY0RhdGFbMV1baW5kZXhdW2pdOg0KCQkJCQlwaW5kID0gcGluZCsxDQoJCQkJCUlEID0gY3VySUQrJ3B7OjAyZH0nLmZvcm1hdChwaW5kKQ0KCQkJCWVsaWYgIkV4YW1wbGUiIGluIHNlbGYudG9jRGF0YVsxXVtpbmRleF1bal06DQoJCQkJCWVpbmQgPSBlaW5kKzENCgkJCQkJSUQgPSBjdXJJRCsnZXs6MDJkfScuZm9ybWF0KGVpbmQpDQoJCQkJZWxpZiAiUmV2aWV3IiBpbiBzZWxmLnRvY0RhdGFbMV1baW5kZXhdW2pdOg0KCQkJCQloaW5kID0gaGluZCsxDQoJCQkJCUlEID0gY3VySUQrJ2h7OjAyZH0nLmZvcm1hdChoaW5kKQ0KCQkJCWVsaWYgIlByb2plY3QiIGluIHNlbGYudG9jRGF0YVsxXVtpbmRleF1bal06DQoJCQkJCW1pbmQgPSBtaW5kKzENCgkJCQkJSUQgPSBjdXJJRCsnbXs6MDJkfScuZm9ybWF0KG1pbmQpDQoJCQkJc2VsZi50b2NSSUdIVC5pbnNlcnQoY3VySUQsJ2VuZCcsSUQsdGV4dD1zZWxmLnRvY0RhdGFbMV1baW5kZXhdW2pdLHRhZ3M9J3BnRm9udCcpDQoJCXNlbGYudG9jUklHSFQudGFnX2NvbmZpZ3VyZSgnc2VjRm9udCcsZm9udD0oJ0NhbGlicmknLDEyLCdub3JtYWwnKSkNCgkJc2VsZi50b2NSSUdIVC50YWdfY29uZmlndXJlKCdwZ0ZvbnQnLGZvbnQ9KCdDYWxpYnJpJywxMSwnbm9ybWFsJykpDQoJCXJldHVybg0KDQoJZGVmIGNsb3NlVHJlZXNfY2FsbGJhY2soc2VsZixldmVudCk6DQoJCXNlbGYuY2xvc2VUcmVlcygpDQoNCglkZWYgY2xvc2VUcmVlcyhzZWxmKToNCgkJY2hpbGRyZW4gPSBzZWxmLnRvY1JJR0hULmdldF9jaGlsZHJlbigpCQ0KCQlmb3IgaSBpbiByYW5nZShsZW4oY2hpbGRyZW4pKToNCgkJCXNlbGYudG9jUklHSFQuaXRlbShjaGlsZHJlbltpXSxvcGVuPUZhbHNlKQ0KCQlyZXR1cm4NCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyBEQVRBIExPQURJTkcgTUVUSE9EUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCglkZWYgbG9hZFByb2dyYW1EYXRhKHNlbGYpOg0KCQlzZWxmLmxvYWRUT0MoKQ0KCQlzZWxmLmxvYWRQYWdlRGF0YSgpDQoJCXNlbGYubG9hZEZ1bmNEaWN0KCkNCg0KCWRlZiBsb2FkUGFnZURhdGEoc2VsZik6DQoJCXNlbGYucGFnZUlEID0gbGlzdCgpDQoJCXNlbGYubGVzc29uRGF0YSA9IGRpY3QoKQ0KCQlzZWxmLmV4YW1wbGVEYXRhID0gZGljdCgpDQoJCXNlbGYucHJhY3RpY2VEYXRhID0gZGljdCgpDQoJCXNlbGYucHJvamVjdERhdGEgPSBkaWN0KCkNCgkJZm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYudG9jRGF0YVsxXSkpOg0KCQkJc0luZCA9IDANCgkJCWZvciBqIGluIHJhbmdlKGxlbihzZWxmLnRvY0RhdGFbMV1baV0pKToNCgkJCQlkb0FwcGVuZCA9IFRydWUNCgkJCQllbnRyeSA9IHNlbGYudG9jRGF0YVsxXVtpXVtqXS5zdHJpcCgnXG4nKQ0KCQkJCWlmICdTZWN0aW9uJyBpbiBlbnRyeToNCgkJCQkJc0luZCA9IHNJbmQrMQ0KCQkJCQlwSW5kID0gMA0KCQkJCQllSW5kID0gMA0KCQkJCQloSW5kID0gMA0KCQkJCQltSW5kID0gMA0KCQkJCQlkb0FwcGVuZCA9IEZhbHNlDQoJCQkJCXNlY3Rpb25OYW1lID0gZW50cnkNCgkJCQlpZiAnTGVzc29uJyBpbiBlbnRyeToNCgkJCQkJY2hhciA9ICdwJw0KCQkJCQlwSW5kID0gcEluZCsxDQoJCQkJCWluZCA9IHBJbmQNCgkJCQllbGlmICdFeGFtcGxlJyBpbiBlbnRyeToNCgkJCQkJY2hhciA9ICdlJw0KCQkJCQllSW5kID0gZUluZCsxDQoJCQkJCWluZCA9IGVJbmQNCgkJCQllbGlmICdSZXZpZXcnIGluIGVudHJ5Og0KCQkJCQljaGFyID0gJ2gnDQoJCQkJCWhJbmQgPSBoSW5kKzENCgkJCQkJaW5kID0gaEluZA0KCQkJCWVsaWYgJ1Byb2plY3QnIGluIGVudHJ5Og0KCQkJCQljaGFyID0gJ20nDQoJCQkJCW1JbmQgPSBtSW5kKzENCgkJCQkJaW5kID0gbUluZA0KCQkJCWVsc2U6DQoJCQkJCWNoYXIgPSAnZXJyb3InDQoJCQkJCWluZCA9IDANCg0KCQkJCWlmIGRvQXBwZW5kOg0KCQkJCQlzdHJpbmcgPSAiY3s6MDJkfXN7OjAyZH17fXs6MDJkfSIuZm9ybWF0KGkrMSxzSW5kLGNoYXIsaW5kKQ0KCQkJCQlzZWxmLnBhZ2VJRC5hcHBlbmQoc3RyaW5nKQ0KCQkJCQljaGFwVGl0bGUgPSAnICAnK3NlbGYudG9jRGF0YVswXVtpXSsnICAnDQoJCQkJCXNlY1RpdGxlID0gJyAgJytzZWN0aW9uTmFtZSArJyAgJw0KCQkJCQlwYWdlVGl0bGUgPSAnICAnK2VudHJ5KycgICcNCgkJCQkJaWYgY2hhcj09J3AnOg0KCQkJCQkJc2VsZi5sZXNzb25EYXRhW3N0cmluZ10gPSBkaWN0KCkNCgkJCQkJCXNlbGYubGVzc29uRGF0YVtzdHJpbmddWydjaGFwdGVyJ10gPSBjaGFwVGl0bGUNCgkJCQkJCXNlbGYubGVzc29uRGF0YVtzdHJpbmddWydzZWN0aW9uJ10gPSBzZWNUaXRsZQ0KCQkJCQkJc2VsZi5sZXNzb25EYXRhW3N0cmluZ11bJ3N1YnNlY3Rpb24nXSA9IHBhZ2VUaXRsZQ0KDQoJCQkJCWVsaWYgY2hhcj09J2UnOg0KCQkJCQkJc2VsZi5leGFtcGxlRGF0YVtzdHJpbmddID0gZGljdCgpDQoJCQkJCQlzZWxmLmV4YW1wbGVEYXRhW3N0cmluZ11bJ2NoYXB0ZXInXSA9IGNoYXBUaXRsZQ0KCQkJCQkJc2VsZi5leGFtcGxlRGF0YVtzdHJpbmddWydzZWN0aW9uJ10gPSBzZWNUaXRsZQ0KCQkJCQkJc2VsZi5leGFtcGxlRGF0YVtzdHJpbmddWydzdWJzZWN0aW9uJ10gPSBwYWdlVGl0bGUNCgkJCQkJZWxpZiBjaGFyPT0naCc6DQoJCQkJCQlzZWxmLnByYWN0aWNlRGF0YVtzdHJpbmddID0gZGljdCgpDQoJCQkJCQlzZWxmLnByYWN0aWNlRGF0YVtzdHJpbmddWydjaGFwdGVyJ10gPSBjaGFwVGl0bGUNCgkJCQkJCXNlbGYucHJhY3RpY2VEYXRhW3N0cmluZ11bJ3NlY3Rpb24nXSA9IHNlY1RpdGxlDQoJCQkJCQlzZWxmLnByYWN0aWNlRGF0YVtzdHJpbmddWydzdWJzZWN0aW9uJ10gPSBwYWdlVGl0bGUNCgkJCQkJZWxpZiBjaGFyPT0nbSc6DQoJCQkJCQlzZWxmLnByb2plY3REYXRhW3N0cmluZ10gPSBkaWN0KCkNCgkJCQkJCXNlbGYucHJvamVjdERhdGFbc3RyaW5nXVsnY2hhcHRlciddID0gY2hhcFRpdGxlDQoJCQkJCQlzZWxmLnByb2plY3REYXRhW3N0cmluZ11bJ3NlY3Rpb24nXSA9IHNlY1RpdGxlDQoJCQkJCQlzZWxmLnByb2plY3REYXRhW3N0cmluZ11bJ3N1YnNlY3Rpb24nXSA9IHBhZ2VUaXRsZQ0KCQkJDQoJCWZvciBpIGluIHJhbmdlKGxlbihzZWxmLnBhZ2VJRCkpOg0KCQkJZmlsZW5hbWUgPSBzZWxmLnBhZ2VEYXRhUGF0aCtzZWxmLnBhZ2VJRFtpXSsnLnR4dCcNCgkJCWZpbGVGb3VuZCA9IG9zLnBhdGguZXhpc3RzKGZpbGVuYW1lKQ0KCQkJc2VsZi5sb2FkSURkYXRhKHNlbGYucGFnZUlEW2ldLGZpbGVGb3VuZCkNCgkJcmV0dXJuDQoNCglkZWYgbG9hZElEZGF0YShzZWxmLElELGZpbGVGb3VuZCk6DQoJCWluZCA9IDYNCgkJaWYgSURbaW5kXT09J3AnOg0KCQkJc2VsZi5sb2FkTGVzc29uRGF0YShJRCxmaWxlRm91bmQpDQoJCWVsaWYgSURbaW5kXT09J2UnOg0KCQkJc2VsZi5sb2FkRXhhbXBsZURhdGEoSUQsZmlsZUZvdW5kKQ0KCQllbGlmIElEW2luZF09PSdoJzoNCgkJCXNlbGYubG9hZFByYWN0aWNlRGF0YShJRCxmaWxlRm91bmQpDQoJCWVsaWYgSURbaW5kXT09J20nOg0KCQkJc2VsZi5sb2FkUHJvamVjdERhdGEoSUQsZmlsZUZvdW5kKQ0KCQlyZXR1cm4NCg0KCWRlZiBsb2FkUHJvamVjdERhdGEoc2VsZixJRCxmaWxlRm91bmQpOg0KCQlzZWxmLnByb2plY3REYXRhW0lEXVsnZmlsZUV4aXN0cyddID0gZmlsZUZvdW5kDQoJCWlmIGZpbGVGb3VuZDoNCgkJCWZpbGUgPSBvcGVuKHNlbGYucGFnZURhdGFQYXRoK0lEKycudHh0JykNCgkJCWxpbmVzID0gZmlsZS5yZWFkbGluZXMoKQ0KCQkJZmlsZS5jbG9zZSgpDQoJCQlzdHJpbmcgPSAnJw0KCQkJZm9yIGkgaW4gcmFuZ2UoMSxsZW4obGluZXMpKToNCgkJCQlzdHJpbmcgPSBzdHJpbmcrbGluZXNbaV0NCgkJCXNlbGYucHJvamVjdERhdGFbSURdWyd0ZXh0J10gPSBzdHJpbmcNCgkJcmV0dXJuDQoNCglkZWYgbG9hZFByYWN0aWNlRGF0YShzZWxmLElELGZpbGVGb3VuZCk6DQoJCXNlbGYucHJhY3RpY2VEYXRhW0lEXVsnZmlsZUV4aXN0cyddID0gZmlsZUZvdW5kDQoJCWlmIGZpbGVGb3VuZDoNCgkJCWZpbGUgPSBvcGVuKHNlbGYucGFnZURhdGFQYXRoK0lEKycudHh0JykNCgkJCWxpbmVzID0gZmlsZS5yZWFkbGluZXMoKQ0KCQkJZmlsZS5jbG9zZSgpDQoJCQlmb3IgaSBpbiByYW5nZShsZW4obGluZXMpKToNCgkJCQlpZiAnI0tVIycgaW4gbGluZXNbaV06DQoJCQkJCWhpbmQgPSBsaW5lc1tpXS5maW5kKCdoJykrMQ0KCQkJCQlzZWxmLnByYWN0aWNlRGF0YVtJRF1bJ2t1SGVpZ2h0J10gPSBmbG9hdChsaW5lc1tpXVtoaW5kOl0uc3RyaXAoJ1xuJykpDQoJCQkJZWxpZiAnI1RJIycgaW4gbGluZXNbaV06DQoJCQkJCWluZDEgPSBpDQoJCQkJCWhpbmQgPSBsaW5lc1tpXS5maW5kKCdoJykrMQ0KCQkJCQlzZWxmLnByYWN0aWNlRGF0YVtJRF1bJ3RpSGVpZ2h0J10gPSBmbG9hdChsaW5lc1tpXVtoaW5kOl0uc3RyaXAoJ1xuJykpDQoJCQkJZWxpZiAnI0EjJyBpbiBsaW5lc1tpXToNCgkJCQkJaW5kMiA9IGkNCgkJCQkJaGluZCA9IGxpbmVzW2ldLmZpbmQoJ2gnKSsxDQoJCQkJCXNlbGYucHJhY3RpY2VEYXRhW0lEXVsnYUhlaWdodCddID0gZmxvYXQobGluZXNbaV1baGluZDpdLnN0cmlwKCdcbicpKQ0KCQkJCQlicmVhaw0KCQkJc3RyaW5nID0gJycNCgkJCWZvciBpIGluIHJhbmdlKDEsaW5kMSk6DQoJCQkJc3RyaW5nID0gc3RyaW5nK2xpbmVzW2ldDQoJCQlzZWxmLnByYWN0aWNlRGF0YVtJRF1bJ0tVJ10gPSBzdHJpbmcuc3RyaXAoJ1xuJykNCgkJCXN0cmluZyA9ICcnDQoJCQlmb3IgaSBpbiByYW5nZShpbmQxKzEsaW5kMik6DQoJCQkJc3RyaW5nID0gc3RyaW5nK2xpbmVzW2ldDQoJCQlzZWxmLnByYWN0aWNlRGF0YVtJRF1bJ1RJJ10gPSBzdHJpbmcuc3RyaXAoJ1xuJykNCgkJCXN0cmluZyA9ICcnDQoJCQlmb3IgaSBpbiByYW5nZShpbmQyKzEsbGVuKGxpbmVzKSk6DQoJCQkJc3RyaW5nID0gc3RyaW5nK2xpbmVzW2ldDQoJCQlzZWxmLnByYWN0aWNlRGF0YVtJRF1bJ0EnXSA9IHN0cmluZy5zdHJpcCgnXG4nKQ0KCQlyZXR1cm4NCg0KCWRlZiBsb2FkTGVzc29uRGF0YShzZWxmLElELGZpbGVGb3VuZCk6DQoJCXNlbGYubGVzc29uRGF0YVtJRF1bJ2ZpbGVFeGlzdHMnXSA9IGZpbGVGb3VuZA0KCQlpZiBmaWxlRm91bmQ6DQoJCQlmaWxlID0gb3BlbihzZWxmLnBhZ2VEYXRhUGF0aCtJRCsnLnR4dCcpDQoJCQlsaW5lcyA9IGZpbGUucmVhZGxpbmVzKCkNCgkJCWZpbGUuY2xvc2UoKQ0KCQkJaW1QYXRoID0gc2VsZi5pbWFnZVBhdGgrbGluZXNbMV0uc3RyaXAoJ1xuJykNCgkJCWltID0gUGhvdG9JbWFnZShmaWxlPWltUGF0aCkNCgkJCXNlbGYubGVzc29uRGF0YVtJRF1bJ2ltZyddID0gaW0NCgkJCXNlbGYubGVzc29uRGF0YVtJRF1bJ2JpZ0lkZWEnXSA9IGxpbmVzWzNdDQoJCQlzdHJpbmcgPSAnJw0KCQkJZm9yIGkgaW4gcmFuZ2UoNSxsZW4obGluZXMpKToNCgkJCQlzdHJpbmcgPSBzdHJpbmcrbGluZXNbaV0NCgkJCXNlbGYubGVzc29uRGF0YVtJRF1bJ2V4cGxhbmF0aW9uJ10gPSBzdHJpbmcNCgkJI3ByaW50KHNlbGYubGVzc29uRGF0YVtJRF0pDQoJCXJldHVybg0KDQoJZGVmIGxvYWRFeGFtcGxlRGF0YShzZWxmLElELGZpbGVGb3VuZCk6DQoJCXNlbGYuZXhhbXBsZURhdGFbSURdWydmaWxlRXhpc3RzJ10gPSBmaWxlRm91bmQNCgkJaWYgZmlsZUZvdW5kOg0KCQkJZmlsZSA9IG9wZW4oc2VsZi5wYWdlRGF0YVBhdGgrSUQrJy50eHQnKQ0KCQkJbGluZXMgPSBmaWxlLnJlYWRsaW5lcygpDQoJCQlmaWxlLmNsb3NlKCkNCgkJCWluZGxpc3QgPSBsaXN0KCkNCgkJCWZvciBpIGluIHJhbmdlKGxlbihsaW5lcykpOg0KCQkJCWlmICcjbiMnIGluIGxpbmVzW2ldOg0KCQkJCQlpbmRsaXN0LmFwcGVuZChpKQ0KCQkJZm9yIGkgaW4gcmFuZ2UobGVuKGluZGxpc3QpLTEpOg0KCQkJCWxpbmUgPSBsaW5lc1tpbmRsaXN0W2ldXQ0KCQkJCWluZCA9IGludChsaW5lWzM6XS5zdHJpcCgnXG4nKSkNCgkJCQlub3RlID0gJycNCgkJCQlmb3IgaiBpbiByYW5nZShpbmRsaXN0W2ldKzEsaW5kbGlzdFtpKzFdKToNCgkJCQkJbm90ZSA9IG5vdGUrbGluZXNbal0NCgkJCQlzZWxmLmV4YW1wbGVEYXRhW0lEXVtpbmRdID0gbm90ZS5zdHJpcCgnXG4nKQ0KCQlyZXR1cm4NCg0KCWRlZiBsb2FkVE9DKHNlbGYpOg0KCQkjIGdldCByYXcgZGF0YSBhbmQgc3RyaXAgYXdheSBuZXdsaW5lcyBmcm9tIGxpc3QNCgkJZmlsZSA9IG9wZW4oc2VsZi5yb290UGF0aCsndG9jRGF0YS50eHQnLCdyJykNCgkJbGluZXMgPSBmaWxlLnJlYWRsaW5lcygpDQoJCWZpbGUuY2xvc2UoKQ0KCQl3aGlsZSAnXG4nIGluIGxpbmVzOg0KCQkJbGluZXMucmVtb3ZlKCdcbicpDQoNCgkJIyBmaW5kIHRhZ3MgaW4gZmlsZSBhbmQgc3RvcmUgdGhlaXIgaW5kaWNlcyBpbiBpbmRzDQoJCWluZHMgPSBsaXN0KCkNCgkJZm9yIGkgaW4gcmFuZ2UobGVuKGxpbmVzKSk6DQoJCQlpZiBsaW5lc1tpXVswOjJdPT0iI2MiOg0KCQkJCWluZHMuYXBwZW5kKGkpDQoNCgkJIyBidWlsZCB0b2NEYXRhIGZpZWxkIGFuZCBzdHJpcCBuZXdsaW5lcyBmcm9tIHN0cmluZ3MNCgkJc2VsZi50b2NEYXRhID0gbGlzdCgpDQoJCXNlbGYudG9jRGF0YS5hcHBlbmQobGlzdCgpKQ0KCQlzZWxmLnRvY0RhdGEuYXBwZW5kKGxpc3QoKSkNCgkJZm9yIGkgaW4gcmFuZ2UoMSxpbmRzWzBdKToNCgkJCXNlbGYudG9jRGF0YVswXS5hcHBlbmQobGluZXNbaV0uc3RyaXAoJ1xuJykpDQoJCWZvciBpIGluIHJhbmdlKGxlbihpbmRzKS0xKToNCgkJCXNlbGYudG9jRGF0YVsxXS5hcHBlbmQobGlzdCgpKQ0KCQkJZm9yIGogaW4gcmFuZ2UoaW5kc1tpXSsxLGluZHNbaSsxXSk6DQoJCQkJc2VsZi50b2NEYXRhWzFdW2ldLmFwcGVuZChsaW5lc1tqXS5zdHJpcCgnXAluJykpCQ0KCQlzZWxmLnRvY0RhdGFbMV0uYXBwZW5kKGxpc3QoKSkNCgkJZm9yIGogaW4gcmFuZ2UoaW5kc1stMV0rMSxsZW4obGluZXMpKToJDQoJCQlzZWxmLnRvY0RhdGFbMV1bLTFdLmFwcGVuZChsaW5lc1tqXS5zdHJpcCgnXG4nKSkNCgkJcmV0dXJuDQoNCglkZWYgd3JpdGVMYXN0UGFnZShzZWxmLElEKToNCgkJZmlsZSA9IG9wZW4oc2VsZi5yb290UGF0aCsnbGFzdFBhZ2VWaWV3ZWQudHh0JywndycpDQoJCWZpbGUud3JpdGUoSUQpDQoJCWZpbGUuY2xvc2UoKQ0KDQoJZGVmIGxvYWRGdW5jRGljdChzZWxmKToNCgkJc2VsZi5mdW5jRGljdCA9IGRpY3QoKQ0KCQlzZWxmLmZ1bmNEaWN0WydjMDFzMDNlMDEnXT1zZWxmLmMwMXMwM2UwMQkJDQoJCXNlbGYuZnVuY0RpY3RbJ2MwMXMwM2UwMiddPXNlbGYuYzAxczAzZTAyDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyBFWEFNUExFIEZVTkNUSU9OUyAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCglkZWYgYzAxczAzZTAxKHNlbGYpOg0KCQl4ID0gNA0KCQlhZGRyZXNzWCA9IGlkKHgpDQoJCXkgPSAnaGVsbG8nDQoJCWFkZHJlc3NZID0gaWQoeSkNCgkJeiA9IFRydWUNCgkJYWRkcmVzc1ogPSBpZCh6KQ0KCQl4ID0gNQ0KCQlhZGRyZXNzWCA9IGlkKHgpDQoJCXkgPSAnaGVsbG8gdGhlcmUnDQoJCWFkZHJlc3NZID0gaWQoeSkNCgkJeiA9IEZhbHNlDQoJCWFkZHJlc3NaID0gaWQoeikNCgkJcmV0dXJuDQoNCglkZWYgYzAxczAzZTAyKHNlbGYpOg0KCQl4ID0gNA0KCQlhZGRyZXNzWCA9IGlkKHgpDQoJCW9yaWdYID0geA0KCQlvcmlnQWRkWCA9IGFkZHJlc3NYDQoJCXggPSA1DQoJCWFkZHJlc3NYID0gaWQoeCkNCgkJcHJpbnQoJ3ggaXM6ICcrc3RyKHgpKQ0KCQlwcmludCgnQWRkcmVzcyBYIGlzOiAnK3N0cihhZGRyZXNzWCkpDQoJCXJldHVybg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgTUFJTiBQUk9HUkFNICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0Kcm9vdCA9IFRrKCkNCkdVSSA9IGJhc2ljTGVhcm5pbmcocm9vdCkNCnJvb3QubWFpbmxvb3AoKQ0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw=='